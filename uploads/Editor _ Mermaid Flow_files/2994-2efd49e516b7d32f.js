try{!function(){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="2ec613d8-f10f-49da-ac3a-b789bf95fd86",e._sentryDebugIdIdentifier="sentry-dbid-2ec613d8-f10f-49da-ac3a-b789bf95fd86")}()}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2994],{4286:(e,t,a)=>{a.d(t,{b:()=>i});var n=a(95155),r=a(76535),s=a(47650);function i(e){let{pending:t}=(0,s.useFormStatus)();return(0,n.jsx)(r.T,{type:"submit",isLoading:t,...e,"data-sentry-element":"Button","data-sentry-component":"SubmitButton","data-sentry-source-file":"submit_button.tsx"})}},5662:(e,t,a)=>{a.d(t,{_5:()=>o,a9:()=>i,wE:()=>d});var n=a(79368),r=a(78373),s=a(20556);let i={rectangle:{key:"rectangle",name:"Rectangle",aspectRatio:"2/1",leftChar:"[",rightChar:"]"},rounded:{key:"rounded",name:"Rounded",aspectRatio:"2/1",leftChar:"(",rightChar:")"},stadium:{key:"stadium",name:"Stadium",aspectRatio:"2/1",leftChar:"([",rightChar:"])"},subroutine:{key:"subroutine",name:"Subroutine",aspectRatio:"2/1",leftChar:"[[",rightChar:"]]"},circle:{key:"circle",name:"Circle",aspectRatio:"1/1",leftChar:"((",rightChar:"))"},doubleCircle:{key:"doubleCircle",name:"Double circle",aspectRatio:"1/1",leftChar:"(((",rightChar:")))"},cylinder:{key:"cylinder",name:"Cylinder",aspectRatio:"2/1",leftChar:"[(",rightChar:")]"},diamond:{key:"diamond",name:"Diamond",aspectRatio:"1/1",leftChar:"{",rightChar:"}"},hexagon:{key:"hexagon",name:"Hexagon",aspectRatio:"2/1",leftChar:"{{",rightChar:"}}"},parallelogramRight:{key:"parallelogramRight",name:"Parallelogram right",aspectRatio:"2/1",leftChar:"[/",rightChar:"/]"},parallelogramLeft:{key:"parallelogramLeft",name:"Parallelogram left",aspectRatio:"2/1",leftChar:"[\\",rightChar:"\\]"},trapezoid:{key:"trapezoid",name:"Trapezoid",aspectRatio:"2/1",leftChar:"[/",rightChar:"\\]"},trapezoidInverted:{key:"trapezoidInverted",name:"Trapezoid Inverted",aspectRatio:"2/1",leftChar:"[\\",rightChar:"/]"},flag:{key:"flag",name:"Flag",aspectRatio:"2/1",leftChar:">",rightChar:"]"}};Object.values(i).filter(e=>"1/1"===e.aspectRatio),Object.values(i).filter(e=>"2/1"===e.aspectRatio);let l=s.KC([s.eu("square"),s.eu("rect"),s.eu("round"),s.eu("stadium"),s.eu("subroutine"),s.eu("cylinder"),s.eu("hexagon"),s.eu("lean_right"),s.eu("lean_left"),s.eu("trapezoid"),s.eu("inv_trapezoid"),s.eu("odd"),s.eu("circle"),s.eu("doublecircle"),s.eu("diamond"),s.Vx()]),o=n.e9.extend({type:l.or(r.jv).or(s.eu("style"))}),c=s.Ik({id:s.Yj(),domId:s.Yj(),text:s.Yj(),styles:s.YO(s.Yj()).default([]),classes:s.YO(s.Yj()).default([]),props:s.g1(s.Yj(),s.Yj()).default({}),locations:s.YO(o),form:s.KC([s.eu("square"),s.eu("circle"),s.eu("rounded"),s.Vx()]),assetHeight:s.KC([s.ai(),s.Vx()]),assetWidth:s.KC([s.ai(),s.Vx()]),img:s.KC([s.Yj(),s.Vx()]),icon:s.KC([s.Yj(),s.Vx()]),pos:s.KC([s.eu("t"),s.eu("b"),s.Vx()]),constraint:s.KC([s.eu("on"),s.eu("off"),s.Vx()])}).and(s.Ik({isShape:s.eu(!1).default(!1),type:l}).or(s.Ik({isShape:s.eu(!0).default(!0),type:r.jv.default("rect")}))),d=s.Tj(s.Yj(),c);s.Tj(s.Yj(),s.YO(o))},8405:(e,t,a)=>{a.d(t,{CopyTextButton:()=>d});var n=a(95155),r=a(5924),s=a(78029),i=a(19471),l=a(76535),o=a(58013),c=a(12115);function d(e){let{copyText:t,buttonText:a,iconProps:d,buttonProps:u,setErrorMessage:m}=e,[g,h]=(0,c.useState)("default");return(0,n.jsxs)(l.T,{...u,isDisabled:(null==u?void 0:u.isDisabled)||"default"!==g,onPress:async()=>{requestAnimationFrame(()=>console.info("Copying text: '".concat(t,"'"))),null==m||m(null);try{h("loading"),await navigator.clipboard.writeText(t),h("loaded"),setTimeout(()=>{h("default")},3e3)}catch(e){null==m||m("An unexpected error occurred"),h("default")}},"data-sentry-element":"Button","data-sentry-component":"CopyTextButton","data-sentry-source-file":"copy_text_button.tsx",children:[(0,n.jsx)(o.LucideIcon,{icon:"loaded"===g?r.A:"loading"===g?i.A:s.A,...d,"data-sentry-element":"LucideIcon","data-sentry-source-file":"copy_text_button.tsx"}),(null==u?void 0:u.isIconOnly)!==!0&&("loaded"===g?"Copied":"loading"===g?"Copying":null!=a?a:"Copy")]})}},15681:(e,t,a)=>{a.d(t,{D:()=>m,v:()=>h});var n=a(95155),r=a(84843),s=a(38398),i=a(49476),l=a(61750),o=a(12115),c=a(71138),d=a(89863);let u=o.createContext(null);function m(){let e=o.useContext(u);return e||null}function g(e){let{children:t,width:a,height:r}=e;return(0,n.jsx)(u.Provider,{value:{width:a,height:r},"data-sentry-element":"SplitPaneContext.Provider","data-sentry-component":"PaneProvider","data-sentry-source-file":"split_pane.tsx",children:t})}function h(e){let{show:t,showWhenWindowIsTooShort:a,orientation:c,children:d,firstPane:u,secondPane:m,initialOffset:h,windowSize:x}=e,f="horizontal"===c,y=f?x.width:x.height,[b,v]=(0,o.useState)(!1),w=y-u.minLength-m.minLength<=0?a:t,j=p(e=>e.offset),k=p(e=>e.setOffset);0===j&&k(function(e){let{initialOffset:t,windowLength:a}=e;if(null!=t)switch(t.pane){case"first":return t.length;case"second":return a-t.length;default:t.pane}return a/2}({initialOffset:h,windowLength:y}));let I=y-j,N=(0,o.useCallback)(e=>{k(Math.min(Math.max(Math.min(f?e.clientX:e.clientY,y),u.minLength),y-m.minLength))},[f,u.minLength,m.minLength,y]),T=(0,o.useCallback)(()=>{v(!1),document.removeEventListener("mousemove",N),document.removeEventListener("mouseup",T)},[N]),S=()=>{v(!0),document.addEventListener("mousemove",N),document.addEventListener("mouseup",T)};return"first"===w?d[0]:"second"===w?d[1]:(0,n.jsxs)("div",{className:(0,s.cn)("flex h-dvh w-dvw",{"flex-row":f,"flex-col":!f,"select-none":b}),"data-sentry-component":"SplitPane","data-sentry-source-file":"split_pane.tsx",children:[(0,n.jsx)("div",{className:(0,s.cn)(u.className),style:f?{width:"".concat(j,"px"),minWidth:"".concat(u.minLength,"px")}:{height:"".concat(j,"px"),minHeight:"".concat(u.minLength,"px")},children:(0,n.jsx)(g,{width:f?j:x.width,height:f?x.height:j,"data-sentry-element":"PaneProvider","data-sentry-source-file":"split_pane.tsx",children:d[0]})}),(0,n.jsx)(r.y,{className:(0,s.cn)("z-30 flex items-center justify-center",f?"h-auto cursor-col-resize":"w-auto cursor-row-resize"),onMouseDown:S,onTouchStart:S,orientation:f?"vertical":"horizontal","data-sentry-element":"Divider","data-sentry-source-file":"split_pane.tsx",children:(0,n.jsx)("div",{className:(0,s.cn)("flex items-end justify-center rounded-full bg-default",f?"w-3 min-w-3 cursor-col-resize":"h-3 min-h-3 cursor-row-resize"),onMouseDown:S,onTouchStart:S,children:f?(0,n.jsx)(i.A,{}):(0,n.jsx)(l.A,{})})}),(0,n.jsx)("div",{style:f?{minWidth:"".concat(m.minLength,"px")}:{minHeight:"".concat(m.minLength,"px")},className:(0,s.cn)(u.className,"flex-1"),children:(0,n.jsx)(g,{width:f?I:x.width,height:f?x.height:I,"data-sentry-element":"PaneProvider","data-sentry-source-file":"split_pane.tsx",children:d[1]})})]})}let p=(0,c.v)()((0,d.Zr)(e=>({offset:0,setOffset:t=>e(()=>({offset:t}))}),{name:"split-pane-store"}))},22249:(e,t,a)=>{a.d(t,{S9:()=>C,sb:()=>_,MN:()=>P,fI:()=>R});var n,r,s,i,l,o=a(79368),c=a(5662),d=a(20556);let u=c._5.extend({startNodeLocation:c._5.extend({nodes:d.YO(d.Yj())}),linkLocation:c._5,endNodeLocation:c._5.extend({nodes:d.YO(d.Yj())})}),m="normal",g=d.vk(e=>"INVALID"===e?m:e,d.KC([d.eu(m),d.eu("thick"),d.eu("dotted"),d.eu("invisible")])).default(m),h="arrow_open",p=d.vk(e=>"INVALID"===e?h:e,d.KC([d.eu(h),d.eu("arrow_cross"),d.eu("arrow_point"),d.eu("arrow_circle"),d.eu("double_arrow_cross"),d.eu("double_arrow_point"),d.eu("double_arrow_circle")]).default(h)),x=d.Ik({start:d.Yj(),end:d.Yj(),labelType:d.Yj(),length:d.ai().default(1),stroke:g,text:d.Yj(),type:p,location:u,styleLocations:d.YO(o.e9).default([]),styles:d.YO(d.Yj()).default([])}),f=d.YO(x);var y=a(78373),b=a(97434),v=a(60131),w=a(47124),j=a(580),k=a.n(j),I=a(11280),N=a(37485),T=a(12115),S=a(71138),D=a(89863);let C=!1;function P(e){if(!("hash"in e))return null;let t=e.hash;if(!("loc"in t))return null;let a=t.loc;return{firstLine:a.first_line,lastLine:a.last_line,firstColumn:a.first_column,lastColumn:a.last_column}}let _={logLevel:"fatal",look:null!=(n=N.A.mermaidAPI.defaultConfig.look)?n:"classic",maxEdges:null!=(r=N.A.mermaidAPI.defaultConfig.maxEdges)?r:500,maxTextSize:null!=(s=N.A.mermaidAPI.defaultConfig.maxTextSize)?s:5e4,theme:null!=(i=N.A.mermaidAPI.defaultConfig.theme)?i:"default",layout:null!=(l=N.A.mermaidAPI.defaultConfig.layout)?l:"dagre"},E={title:null,config:_};function A(e){var t;let a=e.lastIndexOf("\n");return null==(t=e.slice(a+1).match(/^[ \t]*/))?void 0:t[0]}function L(e){let{type:t,diagram:a,id:n}=e;if(null!=n)return a["".concat(t,"s")].find(e=>e.id===n)}let R=(0,S.v)()((0,D.Zr)((e,t)=>{let a=async a=>{await (0,T.startTransition)(async()=>{if(t().editorText!==a)return void console.warn("Discarding update as editorText has since been modified");e(()=>({diagramText:a}));let n=null;try{let{config:t,title:r}=N.A.mermaidAPI.processFrontmatter(a),s={title:null!=r?r:null,config:{..._,...t}};e(()=>({frontMatter:s})),await N.A.parse(a,{suppressErrors:!1}),n=await N.A.mermaidAPI.getDiagramFromText(a,{title:r})}catch(t){if(a.trim().length<=0){console.info("Empty diagram"),e(()=>({diagram:null}));return}if(C&&console.warn("[development]",t),t instanceof Error){let a=P(t);e(()=>({diagram:null,error:{message:t.message,location:a}}))}else e(()=>({diagram:null,error:{message:"An unexpected error occurred, please contact support.",location:null}}));return}try{let t=n.getType(),d=(0,o.M9)(t);if(null==d)throw Error("Unknown diagram type: ".concat(t,", text: ").concat(a));if("info"===d)return void e(()=>({diagram:{type:d,interactive:!0}}));if("flowchart"!==d)return void e(()=>({diagram:{type:d,interactive:!1}}));let u=n.db.getVertices(),m=Object.values(n.db.getSubGraphs());for(let[e,t]of u.entries()){var r,s,i,l;let a=m.find(e=>(null==e?void 0:e.id)===(null==t?void 0:t.id));null!=a&&null!=t&&(a.locations=[...null!=(r=null==a?void 0:a.locations)?r:[],...(null!=(s=null==t?void 0:t.locations)?s:[]).filter(e=>null==e.type||"style"===e.type)].toSorted((e,t)=>{var a,n;return(null!=(a=null==e?void 0:e.lastLine)?a:0)-(null!=(n=null==t?void 0:t.lastLine)?n:0)}),a.styles=[...null!=(i=null==a?void 0:a.styles)?i:[],...null!=(l=null==t?void 0:t.styles)?l:[]],u.delete(e))}let g=Object.values(n.db.getEdges()).filter(e=>!Array.isArray(e)&&"object"==typeof e),h=c.wE.safeParse(u);if(!h.success)throw console.error("Nodes issues",h.error.format()),h.error;let p=b.sB.safeParse(m);if(!p.success)throw console.error("Subgraph issues",p.error.format()),p.error;let x=f.safeParse(g);if(!x.success)throw console.error("Edge issues",x.error.format()),x.error;for(let e of h.data.keys())p.data.find(t=>e===t.id)&&h.data.delete(e);let{subgraphs:y,nodes:v,edges:j}=function(e){let{mermaidSubgraphs:t,mermaidNodes:a,mermaidEdges:n,text:r}=e,s=function(e){let{mermaidSubgraphs:t,mermaidNodes:a,text:n}=e,r=new Map;for(let e of t)r.set("subgraph-"+e.id,e);for(let e of a.values())r.set("node-"+e.id,e);let s=Array.from(a.values()).filter(e=>null==t.find(t=>t.nodes.includes(e.id))).map(e=>({...e,depth:0})),i=t.filter(e=>null==t.find(t=>t.nodes.includes(e.id))).map(e=>({...e,depth:0})),l=[...s],o=[...i],c=(e,t)=>{for(let s of e.nodes){var a;if(";"===s){console.warn("Unnecessary semicolons");continue}let e=null!=(a=r.get("subgraph-"+s))?a:r.get("node-"+s);if(null==e){w.F.error("vertex is undefined, unable to assign depth. Text: '".concat(n,"', vertexId: ").concat(s));continue}"nodes"in e?(o.push({...e,depth:t}),c(e,t+1)):l.push({...e,depth:t})}};for(let e of i)c(e,1);return{subgraphs:o,nodes:l}}({mermaidSubgraphs:t,mermaidNodes:a,text:r}),i=[],l=e=>{let{node:t,keyParams:a}=e;i.push({...t,w:t.assetWidth,h:t.assetHeight,keyParams:a,type:"node",style:M(t.styles)})};for(let e of s.nodes){if(e.isShape){var o;l({node:e,keyParams:{type:"node-shape",key:null!=(o=e.type)?o:"rect"}});continue}switch(e.type){case"square":case"rect":case void 0:l({node:e,keyParams:{key:"rectangle",type:"node"}});break;case"round":l({node:e,keyParams:{key:"rounded",type:"node"}});break;case"stadium":l({node:e,keyParams:{key:"stadium",type:"node"}});break;case"subroutine":l({node:e,keyParams:{key:"subroutine",type:"node"}});break;case"cylinder":l({node:e,keyParams:{key:"cylinder",type:"node"}});break;case"hexagon":l({node:e,keyParams:{key:"hexagon",type:"node"}});break;case"lean_right":l({node:e,keyParams:{key:"parallelogramRight",type:"node"}});break;case"lean_left":l({node:e,keyParams:{key:"parallelogramLeft",type:"node"}});break;case"trapezoid":l({node:e,keyParams:{key:"trapezoid",type:"node"}});break;case"inv_trapezoid":l({node:e,keyParams:{key:"trapezoidInverted",type:"node"}});break;case"odd":l({node:e,keyParams:{key:"flag",type:"node"}});break;case"circle":l({node:e,keyParams:{key:"circle",type:"node"}});break;case"doublecircle":l({node:e,keyParams:{key:"doubleCircle",type:"node"}});break;case"diamond":l({node:e,keyParams:{key:"diamond",type:"node"}});break;default:l({node:e,keyParams:{key:"rectangle",type:"node"}}),w.F.error("Unhandled node type",e)}}let c=[];for(let e of s.subgraphs)c.push({...e,text:e.title,keyParams:{key:"subgraph",type:"subgraph"},style:M(e.styles),type:"subgraph"});let d=[];for(let e=0;e<n.length;e++){let t=n[e];d.push({...t,id:d.length.toString(),domId:"L_".concat(t.start,"_").concat(t.end,"_").concat(e),style:M(t.styles)})}return{nodes:i,subgraphs:c,edges:d}}({mermaidNodes:h.data,mermaidSubgraphs:p.data,mermaidEdges:x.data,text:a});e(()=>({diagram:{type:d,interactive:!0,nodes:v,subgraphs:y,edges:j}}))}catch(t){w.F.error(t,"unexpected error setting editor text:",a),e(()=>({diagram:null,diagramText:a,errorMessage:"An unexpected error occurred, please contact support or double check your diagram"}))}})},n=k()(a,500);return{hasHydrated:!1,setHasHydrated:t=>{e(()=>({hasHydrated:t}))},editorText:"",diagramText:"",setEditorText:async t=>{let{text:a}=t;e(()=>({error:null,editorText:a})),await n(a)},setDiagramText:async t=>{let{text:n}=t;e(()=>({error:null,editorText:n})),await a(n)},frontMatter:E,updateFrontMatter:async a=>{let n=t();try{var r,s;let{config:t,text:i,title:l}=N.A.mermaidAPI.processFrontmatter(n.diagramText),o={..._,...t,...a.config},c={title:null!=(s=null!=(r=a.title)?r:l)?s:null,config:o};e(()=>({frontMatter:c})),N.A.initialize(o),await n.setEditorText({text:function(e){let t=Object.entries(e.config).filter(e=>{let[t,a]=e;return _[t]!==a}),a=null!=e.title&&e.title.length>0,n=a?"title: ".concat(e.title):"",r=t.length>0,s=r?"config:\n".concat(t.map(e=>{let[t,a]=e;return"    ".concat(t,": ").concat(a)}).join("\n")):"";return a||r?"---\n".concat(n).concat(r&&a?"\n":"").concat(s,"\n---\n"):""}(c)+i})}catch(e){console.error(e)}},diagram:null,error:null,setError:t=>e(()=>({error:t})),addNode:async e=>{var a,n;let{text:r,keyParams:s,parentId:i}=e,l=t();if((null==(a=l.diagram)?void 0:a.type)!=="flowchart")return void w.F.error("diagram is not flowchart",l.diagram);let o=L({type:"subgraph",diagram:l.diagram,id:i}),c=null==o?void 0:o.locations.find(e=>"start"in e);if(null!=i&&(null==o||null==c))return void w.F.error("parentSubgraph is null",o,"or firstLocation is null",c);let d=null!=c?F(l.diagramText,c.start):void 0,u=null!=(n=null==d?void 0:d.endIndex)?n:l.diagramText.length,m=Z({id:l.getNextVertexId({prefix:"n"}),text:null!=r?r:"",keyParams:s,props:{}}),g=l.diagramText.slice(0,u),h=(0,v.Qw)(g),p=g+h+"	".repeat(null==o?0:o.depth+1)+m+l.diagramText.slice(u);await l.setDiagramText({text:p})},changeNodeParent:async e=>{var a,n;let{id:r,newParentId:s}=e,i=t();if((null==(a=i.diagram)?void 0:a.type)!=="flowchart")return void w.F.error("diagram is not flowchart",i.diagram);let l=L({type:"node",diagram:i.diagram,id:r});if(null==l)return void w.F.error("node id",r,"is null in diagram",i.diagram);let o=L({type:"subgraph",diagram:i.diagram,id:s});if(null!=s&&null==o)return void w.F.error("new parent subgraph id",s,"is null in diagram",i.diagram);let c="	".repeat(null==o?0:o.depth+1);if(null==s&&0===l.depth)return void w.F.error("Trying to move node to root but it's already at the root",i.diagram);let d=z({vertex:l,editorText:i.diagramText,diagram:i.diagram}),u=null==o?void 0:o.locations.find(e=>"start"in e),m=null!=o&&null!=u?F(i.diagramText,u.start).endIndex:i.diagramText.length,g=Z({...l}),h=!1,p=i.diagramText,x=()=>{h=!0;let e=p.slice(0,m),t=p.slice(m),a=(0,v.Qw)(e);p=e+a+c+g+t};for(let e=0;e<d.length;e++){let t=d[e];if(t.startIndex<m&&!h&&x(),p.slice(t.startIndex).startsWith("style "))continue;let a=/^[ ]*&[ ]*/,r=/[ ]*&[ ]*$/,s=d[e-1],i="",o="",c="	".repeat(l.depth+1);null!=s&&H({index:t.startIndex,startIndex:s.startIndex,endIndex:s.endIndex})&&H({index:t.endIndex,startIndex:s.startIndex,endIndex:s.endIndex})?i=p:(i=p.slice(0,t.startIndex).replace(r,"\n"+c),o=p.slice(t.endIndex).replace(a,"\n"+c));let u="",g="";"edge"===t.type&&(u+="\n"+(null!=(n=A(i))?n:"	"),g=U(g)+V(t.edge)),p=i+u+o+g}d.length>0&&(p=p.replaceAll(/^[ \t]+$\n/gm,"")),h||x(),await i.setDiagramText({text:p})},changeSubgraphParent:async e=>{var a,n;let{id:r,newParentId:s}=e,i=t();if((null==(a=i.diagram)?void 0:a.type)!=="flowchart")return void w.F.error("diagram is not flowchart",i.diagram);let l=L({type:"subgraph",diagram:i.diagram,id:r});if(null==l)return void w.F.error("subgraph id",r,"is null in diagram",i.diagram);let o=L({type:"subgraph",diagram:i.diagram,id:s});if(null!=s&&null==o)return void w.F.error("new parent subgraph id",s,"is null in diagram",i.diagram);let c="	".repeat(null==o?0:o.depth+1);if(null==s&&0===l.depth)return void w.F.error("Trying to move subgraph to root but it's already at the root",i.diagram);let d=z({vertex:l,editorText:i.diagramText,diagram:i.diagram}),u=null==o?void 0:o.locations.find(e=>"start"in e),m=null!=o&&u?F(i.diagramText,u.start).endIndex:i.diagramText.length,g=l.locations.filter(e=>"start"in e).map(e=>{let t=F(i.diagramText,e);return i.diagramText.slice(t.startIndex,t.endIndex)}).map(e=>{var t,a,n;let r=(null==o?0:o.depth+1)-l.depth,s=e.split("\n"),i=!0;if(r>0){let e=s.map(e=>{let t=i?e:"	".repeat(r)+e;return i=!1,t}).join("\n");return(null!=(t=A(e))?t:"	")+e}if(r<0){let e=s.map(e=>{let t=i?e:e.replace("	".repeat(-1*r),"");return i=!1,t}).join("\n");return(null!=(a=A(e))?a:"	")+e}return(null!=(n=A(e))?n:"	")+e}).join("\n"+c),h=!1,p=i.diagramText,x=()=>{h=!0,p=p.slice(0,m).trimEnd()+"\n"+g+p.slice(m)};for(let e=0;e<d.length;e++){let t=d[e];if(t.startIndex<m&&!h&&x(),p.slice(t.startIndex).startsWith("style "))continue;let a=/^[ ]*&[ ]*/,r=/[ ]*&[ ]*$/,s=d[e-1],i="",o="",c="	".repeat(l.depth+1);null!=s&&H({index:t.startIndex,startIndex:s.startIndex,endIndex:s.endIndex})&&H({index:t.endIndex,startIndex:s.startIndex,endIndex:s.endIndex})?i=p:(i=p.slice(0,t.startIndex).replace(r,"\n"+c),o=p.slice(t.endIndex).replace(a,"\n"+c));let u="",g="";"edge"===t.type&&(u+="\n"+(null!=(n=A(i))?n:"	"),g=U(g)+V(t.edge)),p=i+u+o+g}d.length>0&&(p=p.replaceAll(/^[ \t]+$\n/gm,"")),h||x(),await i.setDiagramText({text:p})},changeNodeKey:async e=>{var a,n,r;let{id:s,keyParams:i}=e,l=t();if((null==(a=l.diagram)?void 0:a.type)!=="flowchart")return void w.F.error("diagram is not flowchart",l.diagram);let o=null!=(n=L({type:"subgraph",diagram:l.diagram,id:s}))?n:L({type:"node",diagram:l.diagram,id:s});if(null==o)return void w.F.error("preExistingVertex is null");let c=null!=(r=o.locations.findLast(e=>null!=e.type&&"style"!==e.type))?r:o.locations[o.locations.length-1];if(null==c)return void w.F.error("typeDefinitionLocation is null");let d=F(l.diagramText,c);if("subgraph"===i.key){let e=Y({id:o.id,text:o.text,nodes:[l.getNextVertexId({prefix:"n"})],tabs:""}),t=l.diagramText+(0,v.Qw)(l.diagramText)+e;await l.setDiagramText({text:t})}else{let e=Z({id:o.id,text:o.text,keyParams:i,..."subgraph"===o.type?{props:{}}:{props:o.props,form:o.form,h:o.h,w:o.w,img:o.img,pos:o.pos,constraint:o.constraint}}),t=l.diagramText.slice(0,d.startIndex)+e+l.diagramText.slice(d.endIndex);await l.setDiagramText({text:t})}},addSubgraph:async e=>{var a,n;let{text:r,parentId:s}=e,i=t();if((null==(a=i.diagram)?void 0:a.type)!=="flowchart")return void w.F.error("diagram is not flowchart",i.diagram);let l=L({type:"subgraph",diagram:i.diagram,id:s}),o=null==l?void 0:l.locations.find(e=>"start"in e);if(null!=s&&(null==l||null==o))return void w.F.error("parentSubgraph is null",l,"or firstLocation is null",o);let c=null!=o?F(i.diagramText,o.start):void 0,d=null!=(n=null==c?void 0:c.endIndex)?n:i.diagramText.length,u="	".repeat(null==l?0:l.depth+1),m=Y({id:i.getNextVertexId({prefix:"s"}),text:null!=r?r:"",nodes:[i.getNextVertexId({prefix:"n"})],tabs:u}),g=i.diagramText.slice(0,d),h=(0,v.Qw)(g),p=g+h+u+m+i.diagramText.slice(d);await i.setDiagramText({text:p})},changeVertexStyle:async e=>{var a;let{vertex:n,style:r}=e,s=t();if((null==(a=s.diagram)?void 0:a.type)!=="flowchart")return void w.F.error("diagram is not flowchart",s.diagram);let i=n.locations.filter(e=>"style"===e.type).map(e=>F(s.diagramText,e));B(i);let l=s.diagramText;for(let e of i)l=l.slice(0,e.startIndex)+l.slice(e.endIndex).replace(/^;/,"");let o=O({...n.style,...r});i.length>0&&(l=l.replaceAll(/^[ \t]+$\n/gm,"")),null==o?await s.setDiagramText({text:l}):await s.setDiagramText({text:l+(0,v.Qw)(l)+"style "+n.id+" "+o})},getNextVertexId:e=>{let{prefix:a}=e,n=t().diagram;if(null==n||"flowchart"!==n.type)return"0";let r=n.nodes.map(e=>e.id).concat(n.subgraphs.map(e=>e.id));for(let e=1;e<1001;e++){let t="".concat(a).concat(e);if(!r.includes(t))return t}return"".concat(a).concat((0,v.r9)(6))},changeVertexText:async e=>{let{vertex:a,newText:n}=e,r=t(),s=n.replaceAll("\n","<br>"),i=a.locations.findLast(e=>"node"===a.type?"style"!==e.type:"start"in e);if(null==i)return void w.F.error("unable to setVertexText as lastLocation is null",i);let l=t().diagramText,o=F(l,"start"in i?i.start:i),c="subgraph"===a.type?K({id:a.id,text:s}):Z({...a,text:s}),d=l.slice(0,o.startIndex)+c+l.slice(o.endIndex);await r.setDiagramText({text:d})},removeVertex:async e=>{var a;let{vertex:n}=e,r=t();if((null==(a=r.diagram)?void 0:a.type)!=="flowchart")return void w.F.error("Attempted to remove vertex from non flowchart",r.diagram);let s=z({vertex:n,editorText:r.diagramText,diagram:r.diagram}),i=r.diagramText;for(let e=0;e<s.length;e++){let t=s[e],a=s[e-1];if(null==a||!H({index:t.startIndex,startIndex:a.startIndex,endIndex:a.endIndex})||!H({index:t.endIndex,startIndex:a.startIndex,endIndex:a.endIndex})){let e="edge"===t.type?"\n	":"";i=i.slice(0,t.startIndex)+e+i.slice(t.endIndex)}}i=i.replaceAll(/^[ \t]+$\n/gm,""),await r.setDiagramText({text:i})},addEdge:async e=>{var a;let{startNodeId:n,endNodeId:r}=e,s=t();if((null==(a=s.diagram)?void 0:a.type)!=="flowchart")return void w.F.error("diagram is not flowchart",s.diagram);let i=V({start:n,end:null!=r?r:s.getNextVertexId({prefix:"n"}),stroke:"normal",type:"arrow_open",length:1,text:""});await t().setDiagramText({text:s.diagramText+(0,v.Qw)(s.diagramText)+i})},removeEdge:async e=>{var a,n;let{edge:r}=e,s=t();if((null==(a=s.diagram)?void 0:a.type)!=="flowchart")return void w.F.error("diagram is not flowchart",s.diagram);let i=r.styleLocations.map(e=>({type:"styleLocation",...F(s.diagramText,e)}));for(let e of(i.push({type:"linkLocation",...F(s.diagramText,r.location.linkLocation)}),s.diagram.edges))if(!(e.id<=r.id))for(let t of e.styleLocations)i.push({type:"otherStyleLocation",...F(s.diagramText,t)});B(i);let l=s.diagramText;for(let e of i)switch(e.type){case"linkLocation":let t=null!=(n=A(l.slice(0,e.startIndex)))?n:"	";l=l.slice(0,e.startIndex)+"\n"+t+l.slice(e.endIndex);break;case"styleLocation":l=l.slice(0,e.startIndex)+l.slice(e.endIndex);break;case"otherStyleLocation":let a=l.slice(e.startIndex,e.endIndex).replace(/^linkStyle (\d+) (.*)$/,(e,t,a)=>{let n=parseInt(t)-1;return"linkStyle ".concat(n," ").concat(a)});l=l.slice(0,e.startIndex)+a+l.slice(e.endIndex)}i.length>0&&(l=l.replaceAll(/^[ \t]+$\n/gm,"")),await s.setDiagramText({text:l})},changeEdgeText:async e=>{let{edge:a,newText:n}=e,r=t(),s=n.replaceAll("\n","\\n"),i=t().diagramText,l=F(i,a.location.linkLocation),o=s.trim().length>0?'|"'.concat(s,'"| '):" ",c=" "+W({...a})+o,d=i.slice(0,l.startIndex)+c+i.slice(l.endIndex);await r.setDiagramText({text:d})},changeEdgeStyle:async e=>{var a;let{edge:n,style:r}=e,s=t();if((null==(a=s.diagram)?void 0:a.type)!=="flowchart")return void w.F.error("diagram is not flowchart",s.diagram);let i=n.styleLocations.map(e=>F(s.diagramText,e));B(i);let l=s.diagramText;for(let e of i)l=l.slice(0,e.startIndex)+l.slice(e.endIndex);i.length>0&&(l=l.replaceAll(/^[ \t]+$\n/gm,""));let o=O({...n.style,...r});await s.setDiagramText({text:null==o?l:U(l)+"linkStyle ".concat(n.id," ").concat(o)})},changeNodeShapeProperty:async e=>{var a,n;let{node:r,properties:s}=e,i=t();if((null==(a=i.diagram)?void 0:a.type)!=="flowchart")return void w.F.error("diagram is not flowchart",i.diagram);let l=null!=(n=r.locations.findLast(e=>null!=e.type&&"style"!==e.type))?n:r.locations[r.locations.length-1];if(null==l)return void w.F.error("location is not defined",i.diagram,r);let o=F(i.diagramText,l),c="node"===r.keyParams.type?{key:"rect",type:"node-shape"}:r.keyParams,d=Z({...r,...s,keyParams:c}),u=i.diagramText.slice(0,o.startIndex)+d+i.diagramText.slice(o.endIndex);await i.setDiagramText({text:u})}}},{name:"text-tab-store",version:2,partialize:e=>({...e,frontMatter:{...e.frontMatter,title:void 0},diagram:void 0,editorText:void 0,error:void 0,hasHydrated:void 0}),onRehydrateStorage:e=>()=>e.setHasHydrated(!0)}));function z(e){let{vertex:t,editorText:a,diagram:n}=e,r=[];return"node"===t.type?r=t.locations.map(e=>({...F(a,e),type:"vertex"})):"subgraph"===t.type&&(r=t.locations.filter(e=>"start"in e).map(e=>({...F(a,e),type:"vertex"}))),"nodes"in t||r.push(...n.edges.filter(e=>e.start===t.id||e.end===t.id).map(e=>({...F(a,e.location.linkLocation),type:"edge",startNodes:e.location.startNodeLocation.nodes,endNodes:e.location.endNodeLocation.nodes,edge:e}))),B(r),r}function B(e){e.sort((e,t)=>{let a=t.endIndex-e.endIndex;if(0===a){let a=e.endIndex-e.startIndex;return t.endIndex-t.startIndex-a}return a})}function M(e){return Object.fromEntries(e.map(e=>e.split(":")))}function O(e){let t=Object.entries(e).map(e=>{let[t,a]=e;return null==a||a.length<=0?"":"".concat(t,":").concat(a)}).filter(e=>""!=e).join(",");return t.length<=0?null:t}function F(e,t){let a=N.A.mermaidAPI.preprocessDiagram(e),n=(0,I.J)(e,a.code),r=(0,v.TA)(a.code,t),s=0,i=0,l=0;for(let e of n){let t=e.count;null!=t&&(e.removed||(l+=t),e.removed&&l<r.startIndex&&(s+=t),e.removed&&l<r.endIndex&&(i+=t))}return{startIndex:r.startIndex+s,endIndex:r.endIndex+i}}function H(e){let{index:t,startIndex:a,endIndex:n}=e;return t>=a&&t<=n}function V(e){var t,a,n;let r=e.text.trim().length>0?'|"'.concat(e.text,'"|'):"";return"".concat(e.start," ").concat(W({length:null!=(t=e.length)?t:1,stroke:null!=(a=e.stroke)?a:"normal",type:null!=(n=e.type)?n:"arrow_open"})).concat(r," ").concat(e.end)}function W(e){var t;let a=function(e){switch(e){case"normal":return"-";case"thick":return"=";case"dotted":return".";case"invisible":return"~"}}(e.stroke),n=null!=(t=e.type)?t:"arrow_open",r=function(e){switch(e){case"arrow_open":return{start:"",end:""};case"arrow_cross":return{start:"",end:"x"};case"arrow_point":return{start:"",end:">"};case"arrow_circle":return{start:"",end:"o"};case"double_arrow_cross":return{start:"x",end:"x"};case"double_arrow_point":return{start:"<",end:">"};case"double_arrow_circle":return{start:"o",end:"o"}}}(n),s=e.length;switch(a){case"-":case"=":switch(n){case"arrow_open":return"".concat(r.start).concat(a.repeat(s+2)).concat(r.end);case"arrow_cross":case"arrow_point":case"arrow_circle":case"double_arrow_cross":case"double_arrow_point":case"double_arrow_circle":return"".concat(r.start).concat(a.repeat(s+1)).concat(r.end)}case".":switch(n){case"arrow_open":case"arrow_cross":case"arrow_point":case"arrow_circle":case"double_arrow_cross":case"double_arrow_point":case"double_arrow_circle":return"".concat(r.start,"-").concat(a.repeat(s),"-").concat(r.end)}case"~":return"".concat(r.start).concat(a.repeat(s+2)).concat(r.end)}}function K(e){let{id:t,text:a}=e;return"subgraph "+t+(a.length>0?b.jw.leftChar+'"'+a+'"'+b.jw.rightChar:"")}function Y(e){let{id:t,text:a,nodes:n,tabs:r}=e,s=n.length>0?"\n		"+r+n.join("\n		"+r):"";return K({id:t,text:a})+s+"\n	"+r+"end"}function Z(e){let{id:t,text:a,props:n,keyParams:r,form:s,h:i,w:l,img:o,pos:d,constraint:u,icon:m}=e;if("node-shape"===r.type){let e=(0,y._6)(r.key),n=[["shape","rect"===r.key?null:r.key],["label",t!==a&&e.showName?a:null],["form",s],["h",null==i?void 0:i.toString()],["w",null==l?void 0:l.toString()],["img",o],["pos",d],["constraint",u],["icon",m]].map(e=>{let[t,a]=e;return function(e){let{key:t,value:a}=e;return null==a||a.length<=0?null:"".concat(t,': "').concat(a,'"')}({key:t,value:a})}).filter(e=>null!=e).join(", ");return"".concat(t,"@{ ").concat(n," }")}let g=Object.entries(null!=n?n:{});if(t===a&&(null==r?void 0:r.key)==="rectangle"&&g.length<=0)return t;let h=g.length>0?"|".concat(g.map(e=>{let[t,a]=e;return"".concat(t,":").concat(a)}).join(";"),"|"):"",p=c.a9[r.key];return t+p.leftChar+h+'"'+(a.length>0?a:" ")+'"'+p.rightChar}function U(e){return e.endsWith("\n	")?e:e+"\n	"}},32994:(e,t,a)=>{let n;a.r(t),a.d(t,{DiagramEditor:()=>ab,EditorDocsSplitPane:()=>aI,getFirstTab:()=>ah,getLastTab:()=>ap,getTabByIndex:()=>af,getTabIndex:()=>ax,orderTabs:()=>ay,tabs:()=>ag});var r=a(95155),s=a(76535),i=a(84843),l=a(54429),o=a(140),c=a(70175),d=a(63066),u=a(1079),m=a(38398),g=a(97027),h=a(55043),p=a(26804),x=a(46522),f=a(33703),y=a(48867),b=a(36294),v=a(88785);function w(e){let{children:t}=e;return(0,r.jsx)(v.ErrorBoundary,{errorComponent:()=>(0,r.jsx)("div",{className:"flex h-full w-full items-center justify-center bg-background",children:(0,r.jsx)(b._,{hideCopyButton:!0,hideSymbol:!0,color:"danger",classNames:{pre:"whitespace-pre-wrap"},children:"An unexpected error occurred, try refreshing the page or contacting support if the issue persists."})}),"data-sentry-element":"ErrorBoundary","data-sentry-component":"UnknownErrorBoundary","data-sentry-source-file":"boundary.tsx",children:t})}var j=a(15681),k=a(31945),I=a(74317),N=a(12115);function T(e){let{children:t}=e;return(0,r.jsx)(N.Suspense,{fallback:(0,r.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,r.jsx)(I.o,{})}),"data-sentry-element":"Suspense","data-sentry-component":"SuspenseSpinner","data-sentry-source-file":"spinner.tsx",children:t})}function S(e){let{children:t}=e;return(0,r.jsx)(N.Suspense,{fallback:(0,r.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,r.jsx)(k.o,{size:"sm",isIndeterminate:!0,"aria-label":"Loading...",className:"max-w-md"})}),"data-sentry-element":"Suspense","data-sentry-component":"SuspenseProgress","data-sentry-source-file":"spinner.tsx",children:t})}var D=a(91310),C=a(92464),P=a(47912),_=a(37184),E=a(83644),A=a(29790),L=a(85778),R=a(38450),z=a(5659),B=a(8405),M=a(58013),O=a(53956),F=a(19458),H=a(76950),V=a(92760),W=a(92373),K=a(73333);let Y=["#000000","#545454","#737373","#a6a6a6","#d9d9d9","#ffffff","#ff3131","#ff5757","#ff66c4","#cb6ce6","#8c52ff","#5e17eb","#0097b2","#0cc0df","#5ce1e6","#38b6ff","#5271ff","#004aad","#00bf63","#7ed957","#c1ff72","#ffde59","#ffbd59","#ff914d",null];function Z(e){let{title:t,onPress:a}=e;return(0,r.jsxs)("div",{className:"flex w-96 flex-col items-center justify-center gap-2","data-sentry-component":"ColorPicker","data-sentry-source-file":"picker.tsx",children:[(0,r.jsx)("div",{className:"w-full text-tiny",children:t}),(0,r.jsx)(U,{"data-sentry-element":"ColorSwatchPicker","data-sentry-source-file":"picker.tsx",children:Y.map(e=>(0,r.jsx)(q,{color:null!=e?(0,K.H0)(e):null,onPress:a},e))})]})}function U(e){let{children:t}=e;return(0,r.jsx)("div",{className:"flex flex-wrap items-center justify-center gap-2","data-sentry-component":"ColorSwatchPicker","data-sentry-source-file":"picker.tsx",children:t})}function q(e){let{color:t,onPress:a}=e;return null==t?(0,r.jsx)(z.I,{placement:"bottom",delay:1e3,className:"rounded-md bg-default",content:"Clear color",children:(0,r.jsx)(s.T,{isIconOnly:!0,size:"sm",className:"border-2 bg-content1",onPress:()=>{a(t)},children:(0,r.jsx)(M.LucideIcon,{className:"text-danger",icon:W.A,width:18})})}):(0,r.jsx)(z.I,{placement:"bottom",delay:1e3,className:"rounded-md bg-default",content:(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"capitalize",children:t.getColorName(navigator.language)})," ",t.toString("hex").toLowerCase()]}),"data-sentry-element":"Tooltip","data-sentry-component":"ColorSwatchPickerItem","data-sentry-source-file":"picker.tsx",children:(0,r.jsx)(s.T,{isIconOnly:!0,size:"sm",style:{backgroundColor:t.toString("hex")},className:"border-2",onPress:()=>{a(t)},"data-sentry-element":"Button","data-sentry-source-file":"picker.tsx"})})}let $=(0,N.forwardRef)((e,t)=>{let{buttonProps:a,Icon:n,label:i,tooltip:l}=e;return(0,r.jsx)(z.I,{content:l,offset:15,hidden:null==l,delay:1e3,children:(0,r.jsxs)("div",{className:"flex w-14 flex-col items-center justify-center gap-2",children:[(0,r.jsx)(s.T,{ref:t,color:"default",size:"md",radius:"full",isIconOnly:!0,...a,children:n}),(0,r.jsx)("p",{className:"whitespace-pre-wrap text-[0.6rem] leading-none",children:i})]})})});$.displayName="PopoverToolbarButton";var G=a(88200);function X(e){(0,N.useEffect)(()=>{let t=t=>{var a;let n=null==(a=document.activeElement)?void 0:a.tagName.toLowerCase();("Delete"===t.key||"Backspace"===t.key)&&"input"!==n&&"textarea"!==n&&e()};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[e])}function Q(e){let[t,a]=(0,N.useState)(null);return(0,N.useEffect)(()=>{var t,r;if(null==e.element)return;if(e.disable){clearTimeout(n),et=new Map;return}let s=(t=e.element,r=a,{observe(){let e=0===et.size;et.has(t)?et.get(t).callbacks.push(r):et.set(t,{rect:void 0,hasRectChanged:!1,callbacks:[r]}),e&&ea()},unobserve(){let e=et.get(t);if(e){let a=e.callbacks.indexOf(r);a>=0&&e.callbacks.splice(a,1),e.callbacks.length||et.delete(t),et.size||clearTimeout(n)}}});return s.observe(),()=>{s.unobserve()}},[e.element,e.disable]),{rect:t,element:e.element}}let J=["bottom","height","left","right","top","width"],ee=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return J.some(a=>e[a]!==t[a])},et=new Map,ea=()=>{let e=[];et.forEach((t,a)=>{let n=a.getBoundingClientRect();ee(n,t.rect)&&(t.rect=n,e.push(t))}),e.forEach(e=>{e.callbacks.forEach(t=>t(e.rect))}),n=setTimeout(ea,300)};var en=a(22249),er=a(63834),es=a(81472),ei=a(65229),el=a(47650);let eo="label";function ec(e){let{edge:t,selector:a,groupSelectors:n,parent:l,disable:o}=e,c=(0,N.useMemo)(()=>[a],[a]),d=(0,en.fI)(e=>e.removeEdge),u=(0,en.fI)(e=>e.changeEdgeStyle),[g,h]=(0,N.useState)(!1),[p,x]=(0,N.useState)(eo),f=(0,N.useRef)(null),[y,b]=(0,N.useState)(t.text),v=(0,en.fI)(e=>e.changeEdgeText);X(()=>{g&&d({edge:t})});let{element:w,rect:j}=Q({element:(0,G.y)({parentElement:l,selectors:c}),disable:o}),k=null==w?void 0:w.getAttribute("d"),I=()=>{h(!1),v({edge:t,newText:y})};if(null==k||null==w||null==j)return(0,r.jsx)(r.Fragment,{});let T=function(e){let t=0,a=0,n=e;for(;null!=n&&"svg"!=n.tagName.toLowerCase();){try{let e=getComputedStyle(n),r=new DOMMatrixReadOnly(e.transform);t+=r.m41,a+=r.m42}catch(e){t+=0,a+=0}n=n.parentElement}return{x:t,y:a}}(w);return(0,r.jsxs)(F.y,{isOpen:g,triggerScaleOnOpen:!1,shouldCloseOnInteractOutside:e=>!!n.includes(e.id)||(h(!1),!1),"data-sentry-element":"Popover","data-sentry-component":"EdgeControl","data-sentry-source-file":"edge_control.tsx",children:[(0,r.jsx)(H.T,{"data-sentry-element":"PopoverTrigger","data-sentry-source-file":"edge_control.tsx",children:(0,r.jsx)("path",{onClick:()=>{h(e=>!e),requestAnimationFrame(()=>{var e;null==(e=f.current)||e.select(),null==p&&g&&(x(eo),b(t.text))})},id:a,className:(0,m.cn)("cursor-pointer stroke-secondary opacity-0 hover:opacity-50"),style:{pointerEvents:"stroke",zIndex:0x5f5e0ff,fillOpacity:0,transform:"translate(".concat(T.x,"px, ").concat(T.y,"px)"),position:"fixed",top:j.top,left:j.left,width:j.width,height:j.height},strokeWidth:12,d:k,"data-sentry-element":"path","data-sentry-source-file":"edge_control.tsx"})}),(0,r.jsxs)(V.C,{className:(0,m.cn)("w-full gap-4 p-4 transition-all"),"data-sentry-element":"PopoverContent","data-sentry-source-file":"edge_control.tsx",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)($,{label:"Edit color",Icon:(0,r.jsx)(er.A,{}),buttonProps:{color:"stroke-color"===p?"secondary":"default",radius:"stroke-color"===p?"md":"full",onPress:()=>{(0,G.dK)(()=>{x(e=>"stroke-color"===e?null:"stroke-color")})}},"data-sentry-element":"PopoverToolbarButton","data-sentry-source-file":"edge_control.tsx"}),(0,r.jsx)($,{label:"Edit label",Icon:(0,r.jsx)(es.A,{}),buttonProps:{color:"label"===p?"secondary":"default",radius:"label"===p?"md":"full",onPress:()=>{(0,G.dK)(()=>{if((0,el.flushSync)(()=>{x(e=>"label"===e?null:"label")}),"label"!==p){var e;null==(e=f.current)||e.select()}})}},"data-sentry-element":"PopoverToolbarButton","data-sentry-source-file":"edge_control.tsx"}),(0,r.jsx)(i.y,{orientation:"vertical",className:"h-10","data-sentry-element":"Divider","data-sentry-source-file":"edge_control.tsx"}),(0,r.jsx)($,{label:"Delete",Icon:(0,r.jsx)(ei.A,{}),buttonProps:{onPress:()=>{d({edge:t})},color:"danger",radius:"full"},"data-sentry-element":"PopoverToolbarButton","data-sentry-source-file":"edge_control.tsx"})]}),"label"===p&&(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsxs)("div",{className:"flex items-end justify-center gap-4",children:[(0,r.jsx)(O.P,{ref:f,label:"Edit label",labelPlacement:"outside",size:"sm",rows:1,minRows:1,value:y.replaceAll("\\n","\n"),onValueChange:b,onKeyDown:e=>{"Enter"!==e.code||e.shiftKey||(e.preventDefault(),I())}}),(0,r.jsx)(s.T,{className:"h-9",radius:"md",onPress:()=>{I()},children:"Save"})]}),(0,r.jsx)(i.y,{}),(0,r.jsx)(Z,{title:"Edit text color",onPress:e=>{var a;u({edge:t,style:{color:null!=(a=null==e?void 0:e.toString("hex"))?a:null}})}})]}),"stroke-color"===p&&(0,r.jsx)("div",{className:"flex flex-col items-center justify-center",children:(0,r.jsx)(Z,{title:"Edit edge color",onPress:e=>{var a;u({edge:t,style:{stroke:null!=(a=null==e?void 0:e.toString("hex"))?a:null}})}})})]})]})}let ed=(0,a(83580).h)((e,t)=>({data:{},useDragSend:a=>{var n,r;let{key:s,value:i}=a;return{draggable:!0,isDragging:null!=(r=null==(n=t().data[s])?void 0:n.isDragging)&&r,onDragStart:t=>{try{t.dataTransfer.setData("text/plain","use-drag-send")}catch(e){console.warn(e)}e(e=>{let{data:t}=e,a={...t};return a[s]={...a[s],isDragging:!0,value:i},{data:a}})},onDragEnd:t=>{e(e=>{let{data:t}=e,a={...t};return a[s]=void 0,{data:a}})}}},useDragReceive:a=>{let{key:n}=a,r=(0,N.useRef)(null),s=(0,N.useRef)(null),[i,l]=(0,N.useState)(!1);return{onDragEnter:e=>{var a,r,s,i;return null!=(s=null==(a=t().data[n])?void 0:a.isDragging)&&s?(e.preventDefault(),e.stopPropagation(),l(!0),null!=(i=null==(r=t().data[n])?void 0:r.value)?i:null):null},onDragOver:e=>{var a,r,i,l;return null!=(i=null==(a=t().data[n])?void 0:a.isDragging)&&i?(e.preventDefault(),e.stopPropagation(),null!=s.current&&(clearTimeout(s.current),s.current=null),null!=(l=null==(r=t().data[n])?void 0:r.value)?l:null):null},onDragLeave:e=>{var a,r,i,o;return null!=(i=null==(a=t().data[n])?void 0:a.isDragging)&&i?(e.preventDefault(),e.stopPropagation(),null!=s.current&&(clearTimeout(s.current),s.current=null),s.current=setTimeout(()=>{l(!1)},10),null!=(o=null==(r=t().data[n])?void 0:r.value)?o:null):null},onDrop:a=>{var s,i;if(!(null!=(i=null==(s=t().data[n])?void 0:s.isDragging)&&i))return null;a.preventDefault(),a.stopPropagation(),r.current=requestAnimationFrame(()=>{l(!1),r.current=null});let o=t().data[n];return null==o?null:(e(e=>{let{data:t}=e,a={...t};return a[n]=void 0,{data:a}}),o.value)},isBeingDraggedOver:i,getData:()=>{var e,a;return null!=(a=null==(e=t().data[n])?void 0:e.value)?a:null}}}}));var eu=a(96008),em=a(36751),eg=a(30926);let eh=(0,eg.createServerReference)("40d19c1ea4f885583099ccf5cd03efdad1d410dc41",eg.callServer,void 0,eg.findSourceMapURL,"createDiagram");var ep=a(71138),ex=a(89863);let ef=(0,ep.v)()((0,ex.Zr)((e,t)=>({prompt:"",setPrompt:t=>{e(()=>({prompt:t}))},messages:[],cancelled:!1,sendUserMessage:async a=>{let{currentDiagram:n,currentError:r,...s}=a;if(t().loading)return;let i=[];if("content"in s){let a=s.content.trim().length;if(a<=0)return void e(()=>({prompt:"",loading:!1,errorMessage:"Enter a prompt"}));if(a>2e3)return void e(()=>({loading:!1,errorMessage:"Reduce the prompt size under 2000 characters"}));i=[...t().messages,{role:"user",content:s.content}]}else i=[...s.messages];e(()=>({prompt:"",loading:!0,errorMessage:null,messages:i,cancelled:!1}));let l=await eh({messages:i,currentDiagram:n,currentError:r});if(!t().cancelled)if(null==l?void 0:l.ok){for await(let a of(e(()=>({cancelled:!1,messages:[...i,{role:"assistant",content:""}]})),(0,em.S7)(l.value)))if(null!=a){if(t().cancelled)return;t().messages.pop(),e(()=>({cancelled:!1,messages:[...i,{role:"assistant",content:a}]}))}e(()=>({loading:!1}))}else e(()=>{var e;return{loading:!1,errorMessage:null!=(e=null==l?void 0:l.error)?e:"Unknown error occurred",cancelled:!1}})},cancel:()=>{t().loading&&e(()=>({loading:!1,errorMessage:null,prompt:"",cancelled:!0}))},reset:()=>{e(()=>({loading:!1,errorMessage:null,messages:[],prompt:"",cancelled:!0}))},regenerate:e=>{let{currentDiagram:a,currentError:n}=e,r=t().messages.slice(0,t().messages.length-1);t().sendUserMessage({messages:r,currentDiagram:a,currentError:n})},loading:!1,errorMessage:null,setErrorMessage:t=>e(()=>({errorMessage:t}))}),{name:"ai-tab-store",storage:(0,ex.KU)(()=>sessionStorage),partialize:e=>({...e,errorMessage:null,loading:!1,cancelled:!1})})),ey=(0,ep.v)()((0,ex.Zr)((e,t)=>({verticalSelectedTabs:{state:"dual",top:"Text",bottom:"Visual"},setVerticalSelectedTabs:t=>{(0,N.startTransition)(()=>{e(()=>({verticalSelectedTabs:t}))})},horizontalSelectedTabs:{state:"single",top:"Text"},setHorizontalSelectedTabs:t=>{(0,N.startTransition)(()=>{e(()=>({horizontalSelectedTabs:t}))})},setTab:a=>{let{tabName:n}=a,{horizontalSelectedTabs:r,verticalSelectedTabs:s}=t();("single"!==r.state||r.top!==n)&&(0,N.startTransition)(()=>{e(()=>({horizontalSelectedTabs:{state:"single",top:n}}))}),("single"!==s.state||s.top!==n)&&("dual"!==s.state||s.top!==n&&s.bottom!==n)&&("none"===s.state?(0,N.startTransition)(()=>{e(()=>({verticalSelectedTabs:{state:"single",top:n}}))}):"single"===s.state?(0,N.startTransition)(()=>{e(()=>({verticalSelectedTabs:{state:"dual",...ay({top:s.top,bottom:n})}}))}):(0,N.startTransition)(()=>{e(()=>({verticalSelectedTabs:{state:"dual",...ay({top:n,bottom:s.top})}}))}))}}),{name:"tabs-store",version:2}));var eb=a(14417),ev=a(5084),ew=a(72262),ej=a(79694);let ek=(0,N.forwardRef)((e,t)=>(0,r.jsx)("div",{ref:t,...e}));ek.displayName="Box";var eI=a(47124);let eN=null,eT="-99999";function eS(){if(null!=eN)return eN;try{let e=document.createElement("div"),t=document.createElement("div");for(let[a,n]of Object.entries({position:"fixed",left:"-100px",top:"-100px",zIndex:eT,padding:"20px"}))e.style.setProperty(a,n),t.style.setProperty(a,n);let a="text-default-foreground bg-background rounded border border-default-foreground p-1",n=document.createElement("div");n.className=a,n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-shapes"><path d="M8.3 10a.7.7 0 0 1-.626-1.079L11.4 3a.7.7 0 0 1 1.198-.043L16.3 8.9a.7.7 0 0 1-.572 1.1Z"/><rect x="3" y="14" width="7" height="7" rx="1"/><circle cx="17.5" cy="17.5" r="3.5"/></svg>',e.appendChild(n);let r=document.createElement("div");return r.className=a,r.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-move-up-right"><path d="M13 5H19V11"/><path d="M19 5L5 19"/></svg>',t.appendChild(r),document.body.append(e),document.body.append(t),eN={nodeIcon:e,edgeIcon:t}}catch(e){eI.F.error(e,"setting drag icons")}return null}function eD(e){let{event:t}=e,a=eS();if(null==a)return void eI.F.error("Unable to setVertexDragIcon as icons undefined");t.dataTransfer.setData("text/plain","set-vertex-icon"),t.dataTransfer.setDragImage(a.nodeIcon,-20,-20)}function eC(e){let{event:t}=e,a=eS();if(null==a)return void eI.F.error("Unable to setVertexDragIcon as icons undefined");t.dataTransfer.setData("text/plain","set-edge-icon"),t.dataTransfer.setDragImage(a.edgeIcon,-20,-20)}function eP(){let e=eS();if(null==e)return void eI.F.error("Unable to unsetVertexDragIcon as icons undefined");e.nodeIcon.style.zIndex=eT,e.edgeIcon.style.zIndex=eT}var e_=a(79439),eE=a.n(e_),eA=a(12229),eL=a(29829),eR=a(42196),ez=a(59e3),eB=a(52987),eM=a(25862),eO=a.n(eM),eF=a(47691),eH=a(4756);function eV(e){let{children:t,distance:a=300,title:n,className:i,ref:l}=e,[o,c]=(0,N.useState)("right");return(0,r.jsxs)("div",{className:(0,m.cn)("flex flex-col",i),"data-sentry-component":"ControlledScroll","data-sentry-source-file":"controlled.tsx",children:[null!=n&&(0,r.jsx)("div",{className:"pl-10",children:n}),(0,r.jsxs)("div",{className:"flex items-center justify-center",children:[(0,r.jsx)(s.T,{isIconOnly:!0,variant:"light",className:(0,m.cn)({invisible:"left"!==o&&"both"!==o}),onPress:()=>{let e=l.current;null!=e&&e.scroll({left:e.scrollLeft-a,behavior:"smooth"})},"data-sentry-element":"Button","data-sentry-source-file":"controlled.tsx",children:(0,r.jsx)(M.LucideIcon,{icon:eF.A,"data-sentry-element":"LucideIcon","data-sentry-source-file":"controlled.tsx"})}),(0,r.jsx)(u.H,{offset:10,size:20,ref:l,className:"flex max-h-36 items-center justify-between gap-4 pt-2",orientation:"horizontal",visibility:o,onVisibilityChange:c,"data-sentry-element":"ScrollShadow","data-sentry-source-file":"controlled.tsx",children:t}),(0,r.jsx)(s.T,{variant:"light",isIconOnly:!0,className:(0,m.cn)({invisible:"right"!==o&&"both"!==o}),onPress:()=>{let e=l.current;null!=e&&e.scroll({left:e.scrollLeft+a,behavior:"smooth"})},"data-sentry-element":"Button","data-sentry-source-file":"controlled.tsx",children:(0,r.jsx)(M.LucideIcon,{icon:eH.A,"data-sentry-element":"LucideIcon","data-sentry-source-file":"controlled.tsx"})})]})]})}var eW=a(5662),eK=a(78373),eY=a(97434);let eZ={...eW.a9,subgraph:eY.jw},eU=Object.values({subgraph:eY.jw,...eK.nq});var eq=a(39544);function e$(e){let{ToolTip:t,onPressShape:a,onPressSubgraph:n,addOnDrag:s}=e,[i,l]=(0,N.useState)(""),o=(0,N.useRef)(null);return(0,r.jsx)("div",{className:"flex flex-col","data-sentry-component":"FlowchartVertices","data-sentry-source-file":"flowchart.tsx",children:(0,r.jsx)(eV,{ref:o,title:(0,r.jsxs)("div",{className:"flex items-center gap-2 pt-2",children:[(0,r.jsx)(ej.r,{variant:"faded",placeholder:"Search elements",value:i,onValueChange:e=>{var t;null==(t=o.current)||t.scrollTo({left:0,behavior:"smooth"}),l(e)}}),t||(0,r.jsx)("div",{className:"flex h-10 w-10"})]}),distance:(eq.bj+12)*2,"data-sentry-element":"ControlledScroll","data-sentry-source-file":"flowchart.tsx",children:(i.length>1?eE().go(i,eU,{keys:["name","semanticName","description","shortName",e=>e.aliases.join(" ")]}).map(e=>e.obj):eU).map(e=>"Subgraph"===e.name?(0,r.jsx)("div",{children:(0,r.jsx)(eG,{subgraph:eY.jw,onPressVertex:n,addOnDrag:s,children:eY.jw.Icon})},"add-subgraph"):(0,r.jsx)("div",{children:(0,r.jsx)(eX,{onPressShape:a,shape:e,addOnDrag:s,children:e.Icon})},"add-".concat(e.shortName)))})})}function eG(e){let{children:t,subgraph:a,addOnDrag:n,onPressVertex:i}=e,{draggable:l,onDragStart:o,onDragEnd:c}=ed(e=>e.useDragSend({key:"subgraphDetails",value:{keyParams:{key:"subgraph",type:"subgraph"},text:a.name}}));return(0,r.jsx)(s.T,{id:"".concat(a.key,"-icon-button"),radius:"none",style:{height:eq.gr,width:eq.bj},className:(0,m.cn)("item-center flex justify-center bg-transparent p-0"),onPress:()=>{i({vertexKey:a.key})},draggable:l&&n,onDragStart:e=>{eD({event:e}),o(e)},onDragEnd:c,"data-sentry-element":"Button","data-sentry-component":"SubgraphIconButton","data-sentry-source-file":"flowchart.tsx",children:t})}function eX(e){let{children:t,shape:a,onPressShape:n,addOnDrag:i}=e,{draggable:l,onDragStart:o,onDragEnd:c}=ed(e=>e.useDragSend({key:"nodeDetails",value:{keyParams:{key:a.shortName,type:"node-shape"},text:a.name}}));return(0,r.jsx)(s.T,{id:"".concat(a.shortName,"-icon-button"),draggable:l&&i,onDragStart:e=>{eD({event:e}),o(e)},onDragEnd:e=>{eP(),c(e)},radius:"none",style:{height:eq.gr,width:eq.bj},className:(0,m.cn)("item-center flex justify-center bg-transparent p-0"),onPress:()=>{n(a)},"data-sentry-element":"Button","data-sentry-component":"ShapeIconButton","data-sentry-source-file":"flowchart.tsx",children:t})}let eQ=null;async function eJ(){return null==eQ&&(eQ=(await a.e(1030).then(a.t.bind(a,71030,23))).default),eQ}eJ();let e0="label";function e1(e){let{node:t,parent:a,disable:n}=e,s=CSS.escape(t.domId),i=(0,N.useMemo)(()=>["#".concat(s," > path"),"#".concat(s," > polygon"),"#".concat(s," > circle"),"#".concat(s," > rect"),"#".concat(s," > g")],[s]);return(0,r.jsx)(e5,{vertex:t,parent:a,selectors:i,prefix:"n",disable:n,"data-sentry-element":"VertexControl","data-sentry-component":"NodeControl","data-sentry-source-file":"vertex_control.tsx"})}function e2(e){let{subgraph:t,parent:a,disable:n}=e,s=CSS.escape(t.id),i=(0,N.useMemo)(()=>["g[data-id='".concat(s,"'] > rect"),"g#".concat(s," > rect"),"g#".concat(s," > g > path")],[s]);return(0,r.jsx)(e5,{vertex:t,parent:a,selectors:i,prefix:"n",disable:n,"data-sentry-element":"VertexControl","data-sentry-component":"SubgraphControl","data-sentry-source-file":"vertex_control.tsx"})}function e5(e){var t,a,n,l;let{vertex:o,parent:c,selectors:d,prefix:u,disable:g}=e,h=null!=(n="img"in o?o.img:null)?n:"",[p,x]=(0,N.useState)(!1),[f,y]=(0,N.useState)(e0),[b,v]=(0,N.useState)(o.text),[w,j]=(0,N.useState)(h),[k,I]=(0,N.useState)(!1),T=(0,en.fI)(e=>e.getNextVertexId),S=(0,en.fI)(e=>e.changeVertexText),D=(0,en.fI)(e=>e.changeNodeShapeProperty),C=(0,en.fI)(e=>e.addNode),P=(0,en.fI)(e=>e.changeVertexStyle),_=(0,en.fI)(e=>e.changeNodeParent),E=(0,en.fI)(e=>e.changeSubgraphParent),A=(0,en.fI)(e=>e.changeNodeKey),L=(0,en.fI)(e=>e.removeVertex),R=(0,en.fI)(e=>e.addEdge),B=(0,en.fI)(e=>e.addSubgraph),W=(0,N.useRef)(null),K=ed(e=>e.useDragReceive({key:"nodeDetails"})),Y=ed(e=>e.useDragReceive({key:"subgraphDetails"})),U=(0,N.useRef)(null);X(()=>{p&&L({vertex:o})});let q=ed(e=>e.useDragReceive({key:"edgeDetails"})),J=ed(e=>{var t,a;return(null==(t=e.data.nodeDetails)?void 0:t.isDragging)||(null==(a=e.data.subgraphDetails)?void 0:a.isDragging)}),{rect:ee}=Q({element:(0,G.y)({parentElement:null!=c?c:document.body,selectors:d}),disable:g}),et=ed(e=>e.useDragSend({key:"edgeDetails",value:{startNodeId:o.id}})),ea=ed(e=>e.useDragSend("subgraph"===o.keyParams.type?{key:"subgraphDetails",value:{keyParams:o.keyParams,id:o.id,depth:o.depth}}:{key:"nodeDetails",value:{keyParams:o.keyParams,id:o.id,depth:o.depth}}));if((0,N.useEffect)(()=>{j(h)},[h]),J&&"subgraph"!==o.keyParams.key&&!k)return(0,r.jsx)(r.Fragment,{});let eo=!p,ec=()=>{x(!1),S({vertex:o,newText:b})},eu="shadow-vertex-trigger-"+o.id,em=null!=(l=null==(t=K.getData())?void 0:t.id)?l:null==(a=Y.getData())?void 0:a.id,eg="subgraph"===o.type&&null!=em&&o.nodes.includes(em),eh=null!=q.getData(),ep=(null!=K.getData()||null!=Y.getData())&&!eg&&"subgraph"===o.type&&!p,ex=K.isBeingDraggedOver||Y.isBeingDraggedOver,ef=q.isBeingDraggedOver,ey=("node"===o.keyParams.type||"subgraph"===o.keyParams.type)&&"1/1"===eZ[o.keyParams.key].aspectRatio;if(et.isDragging||(e6(),U.current=null),null==ee)return(0,r.jsx)(r.Fragment,{});let eb={position:"fixed",top:ee.top-6,left:ee.left-6,width:ee.width+12,height:ee.height+12,zIndex:(o.depth+1)*10};return(0,r.jsxs)(F.y,{placement:"bottom",triggerScaleOnOpen:!1,isOpen:p,onOpenChange:e=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{var e;null==(e=W.current)||e.select()})}),x(e),e?v(o.text):((0,G.dK)(()=>{y(e0)}),v(""))},shouldCloseOnInteractOutside:e=>e.id===eu||(x(!1),!1),"data-sentry-element":"Popover","data-sentry-component":"VertexControl","data-sentry-source-file":"vertex_control.tsx",children:[(0,r.jsx)(z.I,{hidden:p,placement:"right",classNames:{content:"rounded-full p-0"},content:(0,r.jsx)(s.T,{as:ek,className:"!size-6 min-h-0 min-w-0 rounded-full",variant:"light",onMouseOver:e=>{e.preventDefault(),e.stopPropagation()},isIconOnly:!0,onPress:()=>{R({startNodeId:o.id})},draggable:et.draggable,onDragStart:e=>{e.stopPropagation(),eC({event:e});let t=eQ;U.current=new t(t.pointAnchor({x:e.clientX,y:e.clientY}),t.pointAnchor({x:e.clientX,y:e.clientY}),{color:"grey",size:2,endPlug:"behind",path:"straight"}),et.onDragStart(e)},onDrag:async e=>{var t;e.stopPropagation();let a=eQ;e.clientX<=0||e.clientY<=0||null==(t=U.current)||t.setOptions({end:a.pointAnchor({x:e.clientX,y:e.clientY})})},onDragEnd:e=>{e.stopPropagation(),eP(),et.onDragEnd(e),e6(),U.current=null,x(!1)},children:(0,r.jsx)(eA.A,{size:12})}),"data-sentry-element":"Tooltip","data-sentry-source-file":"vertex_control.tsx",children:(0,r.jsx)("div",{style:eb,children:(0,r.jsx)(H.T,{"data-sentry-element":"PopoverTrigger","data-sentry-source-file":"vertex_control.tsx",children:(0,r.jsx)(s.T,{as:ek,id:eu,isIconOnly:!0,className:(0,m.cn)("h-full w-full min-w-0 rounded-none bg-transparent",{"rounded-full":ey,"cursor-grab":eo,"hover:bg-secondary/50":!p,"bg-primary/50":ep||eh,"border-2 border-primary":!k&&(ep&&ex||eh&&ef),"border-2 border-secondary":p,"bg-red-500/50":!1}),onDragEnter:e=>{K.onDragEnter(e),Y.onDragEnter(e),q.onDragEnter(e)},onDragLeave:e=>{K.onDragLeave(e),Y.onDragLeave(e),q.onDragLeave(e)},onDragOver:e=>{if(eg||k){e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="none";return}K.onDragOver(e),Y.onDragOver(e),q.onDragOver(e)},onDrop:e=>{if(e.stopPropagation(),k)return;let t=K.onDrop(e);if(null!=t)return void(null==t.id?C({keyParams:t.keyParams,parentId:o.id,text:t.text}):_({id:t.id,newParentId:o.id}));let a=Y.onDrop(e);if(null!=a)return void(null==a.id?B({keyParams:a.keyParams,parentId:o.id,text:a.text}):E({id:a.id,newParentId:o.id}));let n=q.onDrop(e);if(null!=n)return void R({startNodeId:n.startNodeId,endNodeId:o.id})},onDragStart:e=>{e.stopPropagation(),eo&&(eD({event:e}),I(!0),ea.onDragStart(e))},onDragEnd:e=>{e.stopPropagation(),eP(),eo&&(I(!1),ea.onDragEnd(e))},draggable:!!eo&&ea.draggable,"data-sentry-element":"Button","data-sentry-source-file":"vertex_control.tsx"})})})}),(0,r.jsxs)(V.C,{className:(0,m.cn)("w-full gap-4 p-4 transition-all"),"data-sentry-element":"PopoverContent","data-sentry-source-file":"vertex_control.tsx",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:["subgraph"!==o.type&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)($,{label:"Edit shape",Icon:(0,r.jsx)(eL.A,{}),buttonProps:{color:"shape"===f?"secondary":"default",radius:"shape"===f?"md":"full",onPress:()=>{(0,G.dK)(()=>{y(e=>"shape"===e?null:"shape")})}}}),(0,r.jsx)($,{label:"Edit image",Icon:(0,r.jsx)(eR.A,{}),buttonProps:{color:"image"===f?"secondary":"default",radius:"image"===f?"md":"full",onPress:()=>{(0,G.dK)(()=>{y(e=>"image"===e?null:"image")})}}})]}),(0,r.jsx)($,{label:"Edit color",Icon:(0,r.jsx)(er.A,{}),buttonProps:{color:"background-color"===f?"secondary":"default",radius:"background-color"===f?"md":"full",onPress:()=>{(0,G.dK)(()=>{y(e=>"background-color"===e?null:"background-color")})}},"data-sentry-element":"PopoverToolbarButton","data-sentry-source-file":"vertex_control.tsx"}),(0,r.jsx)($,{label:"Edit label",Icon:(0,r.jsx)(es.A,{}),buttonProps:{color:"label"===f?"secondary":"default",radius:"label"===f?"md":"full",onPress:()=>{(0,G.dK)(()=>{if((0,el.flushSync)(()=>{y(e=>"label"===e?null:"label")}),"label"!==f){var e;null==(e=W.current)||e.select()}})}},"data-sentry-element":"PopoverToolbarButton","data-sentry-source-file":"vertex_control.tsx"}),(0,r.jsx)($,{label:"Edit border",Icon:(0,r.jsx)(ez.A,{}),buttonProps:{color:"border"===f?"secondary":"default",radius:"border"===f?"md":"full",onPress:()=>{(0,G.dK)(()=>{y(e=>"border"===e?null:"border")})}},"data-sentry-element":"PopoverToolbarButton","data-sentry-source-file":"vertex_control.tsx"}),(0,r.jsx)($,{label:"Delete",Icon:(0,r.jsx)(ei.A,{}),buttonProps:{onPress:()=>{L({vertex:o})},color:"danger",radius:"full"},"data-sentry-element":"PopoverToolbarButton","data-sentry-source-file":"vertex_control.tsx"}),(0,r.jsx)(i.y,{orientation:"vertical",className:"h-10","data-sentry-element":"Divider","data-sentry-source-file":"vertex_control.tsx"}),(0,r.jsx)(e9,{vertex:o,endId:T({prefix:u}),setIsOpen:x,draggable:et.draggable,onDragStart:et.onDragStart,onDragEnd:et.onDragEnd,"data-sentry-element":"CreateEdgeButton","data-sentry-source-file":"vertex_control.tsx"})]}),"label"===f&&(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsxs)("div",{className:"flex items-end justify-center gap-4",children:[(0,r.jsx)(O.P,{ref:W,labelPlacement:"outside",label:"Edit label",size:"sm",rows:1,minRows:1,value:b.replaceAll("<br>","\n"),onValueChange:v,onKeyDown:e=>{"Enter"!==e.code||e.shiftKey||(e.preventDefault(),ec())}}),(0,r.jsx)(s.T,{className:"h-9",radius:"md",onPress:()=>{ec()},children:"Save"})]}),(0,r.jsx)(i.y,{}),(0,r.jsx)(Z,{title:"Edit text color",onPress:e=>{var t;P({vertex:o,style:{color:null!=(t=null==e?void 0:e.toString("hex"))?t:null}})}})]}),"background-color"===f&&(0,r.jsx)("div",{className:"flex flex-col items-center justify-center",children:(0,r.jsx)(Z,{title:"Edit background color",onPress:e=>{var t;P({vertex:o,style:{fill:null!=(t=null==e?void 0:e.toString("hex"))?t:null}})}})}),"border"===f&&(0,r.jsxs)("div",{className:"flex w-full flex-col gap-2",children:[(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,r.jsx)(s.T,{className:"border-1",size:"sm",onPress:()=>{P({vertex:o,style:{"stroke-width":"0.5px","stroke-dasharray":void 0}})},children:"Thin"}),(0,r.jsx)(s.T,{className:"border-2",size:"sm",onPress:()=>{P({vertex:o,style:{"stroke-width":"1px","stroke-dasharray":void 0}})},children:"Normal"}),(0,r.jsx)(s.T,{className:"border-3",size:"sm",onPress:()=>{P({vertex:o,style:{"stroke-width":"2px","stroke-dasharray":void 0}})},children:"Thick"}),(0,r.jsx)(s.T,{className:"border-1 border-dashed",size:"sm",onPress:()=>{P({vertex:o,style:{"stroke-width":"0.5px","stroke-dasharray":"5 5"}})},children:"Thin Dashed"}),(0,r.jsx)(s.T,{className:"border-2 border-dashed",size:"sm",onPress:()=>{P({vertex:o,style:{"stroke-width":"1px","stroke-dasharray":"5 5"}})},children:"Dashed"}),(0,r.jsx)(s.T,{className:"border-3 border-dashed",size:"sm",onPress:()=>{P({vertex:o,style:{"stroke-width":"2px","stroke-dasharray":"5 5"}})},children:"Thick Dashed"}),(0,r.jsx)("div",{}),(0,r.jsx)(s.T,{size:"sm",onPress:()=>{P({vertex:o,style:{"stroke-width":"0px","stroke-dasharray":void 0}})},children:"No border"}),(0,r.jsx)("div",{})]}),(0,r.jsx)(i.y,{}),(0,r.jsx)(Z,{title:"Edit border color",onPress:e=>{var t;P({vertex:o,style:{stroke:null!=(t=null==e?void 0:e.toString("hex"))?t:null}})}})]}),"shape"===f&&(0,r.jsx)("div",{children:(0,r.jsx)("div",{className:"flex h-[11rem] w-[32rem] flex-col gap-2",children:(0,r.jsx)(e$,{onPressSubgraph:()=>{A({id:o.id,keyParams:{key:"subgraph",type:"subgraph"}}),x(!1)},onPressShape:e=>{let t={key:e.shortName,type:"node-shape"};A({id:o.id,keyParams:t}),x(!1)}})})}),"image"===f&&"node"===o.type&&(0,r.jsxs)("div",{className:"flex w-[512px] flex-col gap-4",children:[(0,r.jsxs)("div",{className:"flex items-end gap-4",children:[(0,r.jsx)(ej.r,{label:"Image URL",placeholder:"Paste image URL",variant:"faded",labelPlacement:"outside",value:w,onValueChange:e=>{j(e)},onKeyDown:e=>{"Enter"!==e.code||e.shiftKey||(e.preventDefault(),D({node:o,properties:{img:w}}))}}),(0,r.jsx)(z.I,{content:(0,r.jsxs)(r.Fragment,{children:["Images must be accessible via the web.",(0,r.jsx)("br",{}),"You can upload images to Imgur or ImgBB then paste the link here."]}),children:(0,r.jsx)("div",{className:"h-7",children:(0,r.jsx)(M.LucideIcon,{icon:ev.A,width:16,height:16})})}),(0,r.jsx)(s.T,{radius:"md",className:"w-8",onPress:()=>{D({node:o,properties:{img:w}})},children:"Save"})]}),(0,r.jsx)("div",{className:"w-full",children:(0,r.jsx)(e3,{node:o})})]})]})]})}function e3(e){let{node:t}=e,[a,n]=(0,N.useState)(""),i=(0,en.fI)(e=>e.changeNodeShapeProperty);return(0,r.jsxs)("div",{className:"w-full","data-sentry-component":"LogosSearch","data-sentry-source-file":"vertex_control.tsx",children:[(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(ej.r,{variant:"faded",placeholder:"Search icons",value:a,onValueChange:n,"data-sentry-element":"Input","data-sentry-source-file":"vertex_control.tsx"}),(0,r.jsx)(s.T,{color:"warning",radius:"md",className:"w-8",onPress:()=>{i({node:t,properties:{icon:null}})},"data-sentry-element":"Button","data-sentry-source-file":"vertex_control.tsx",children:"Clear Icon"})]}),(0,r.jsx)(u.H,{className:"h-32 w-full","data-sentry-element":"ScrollShadow","data-sentry-source-file":"vertex_control.tsx",children:(0,r.jsx)(T,{"data-sentry-element":"SuspenseSpinner","data-sentry-source-file":"vertex_control.tsx",children:(0,r.jsx)(e4,{search:a,node:t,"data-sentry-element":"IconList","data-sentry-source-file":"vertex_control.tsx"})})})]})}function e4(e){let{search:t,node:a}=e,n=(0,en.fI)(e=>e.changeNodeShapeProperty),s=(0,N.useRef)((0,eu.e)()),i=(0,N.use)(s.current),l=(0,N.useRef)((0,eu.j)()),o=(0,N.use)(l.current),c=(0,N.useMemo)(()=>eO()(Object.keys(i.icons).map(e=>({icon:e,collection:"logos"})).concat(Object.keys(o.icons).map(e=>({icon:e,collection:"fa"})))),[o.icons,i.icons]),d=eE().go(t,c,{key:"icon",limit:50,all:!0});return(0,r.jsxs)("div",{className:"flex w-full flex-wrap items-center justify-center gap-4 py-4","data-sentry-component":"IconList","data-sentry-source-file":"vertex_control.tsx",children:[0===d.length&&(0,r.jsxs)("div",{children:['No results for: "',t,'"']},"no-search-results"),d.map(e=>{let{obj:{collection:t,icon:s}}=e,i="".concat(t,":").concat(s);return(0,r.jsxs)("div",{className:"flex cursor-pointer flex-col items-center justify-center rounded bg-default p-1 capitalize",onClick:()=>{n({node:a,properties:{icon:i,img:void 0}})},children:[(0,r.jsx)(ew.Icon,{icon:i,width:60,height:60}),s.replaceAll("-"," ")]},i)})]})}function e9(e){let{draggable:t,onDragStart:a,onDragEnd:n,vertex:s,endId:i,setIsOpen:l}=e,o=(0,N.useRef)(null),c=(0,en.fI)(e=>e.addEdge);return(0,r.jsx)($,{label:"Create edge",tooltip:"Click or drag to a node or subgraph to create an edge",Icon:(0,r.jsx)(eB.A,{}),buttonProps:{draggable:t,onDragStart:async e=>{eC({event:e});let t=eQ;o.current=new t(t.pointAnchor({x:e.clientX,y:e.clientY}),t.pointAnchor({x:e.clientX,y:e.clientY}),{color:"grey",size:2,endPlug:"behind",path:"straight"}),a(e)},onDrag:async e=>{var t;if(e.clientX<=0||e.clientY<=0)return;let a=eQ;null==(t=o.current)||t.setOptions({end:a.pointAnchor({x:e.clientX,y:e.clientY})})},onDragEnd:e=>{n(e),e6(),o.current=null,l(!1)},onPress:()=>{l(!1),c({startNodeId:s.id,endNodeId:i})}},"data-sentry-element":"PopoverToolbarButton","data-sentry-component":"CreateEdgeButton","data-sentry-source-file":"vertex_control.tsx"})}function e6(){try{for(let e of document.querySelectorAll(".leader-line"))e.remove()}catch(e){eI.F.error(e)}}let e7=(0,N.memo)(function(e){var t;let{disableShadowContainers:a,className:n}=e,i=(0,en.fI)(e=>e.diagramText),l=(0,en.fI)(e=>e.diagram),o=(0,en.fI)(e=>e.error),c=ey(e=>e.setTab),d=ef(e=>e.sendUserMessage),[u,g]=(0,N.useState)(null),h=(0,L.dJ)(),p=(0,N.useCallback)((e,t)=>{if("info"===t){let t=e.querySelector(".version");if(null==t)return;t.innerHTML=t.innerHTML.replace(/-pro\.\d+$/,"")}g(e)},[]),x=(0,eb._5)(),[y,b]=(0,N.useState)(x.instance.transformState.scale);return(0,eb.Be)(e=>{e.state.scale!==y&&b(e.state.scale)}),(0,r.jsxs)(te,{children:[(0,r.jsx)("div",{className:"absolute top-0 z-10 rounded rounded-l-none rounded-t-none",children:null!=o?(0,r.jsxs)("div",{className:"flex max-h-72 min-h-min max-w-full -translate-x-1 -translate-y-1 flex-col items-start justify-start gap-2 overflow-auto rounded rounded-l-none rounded-t-none bg-warning/10 p-2 dark:bg-background/70",children:[(0,r.jsx)(z.I,{content:"Click to highlight error",placement:"bottom",delay:1e3,children:(0,r.jsx)(s.T,{variant:"light",className:"h-full w-full whitespace-pre-wrap p-2 text-left font-mono font-light text-warning text-tiny",onPress:()=>{c({tabName:"Text"});let e=null==h?void 0:h.editor;null!=e&&requestAnimationFrame(()=>{var t;null==(t=e.getEditors()[0])||t.trigger("mermaid-flow","editor.action.marker.next",void 0)})},children:o.message})}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(B.CopyTextButton,{buttonProps:{size:"sm",variant:"light"},iconProps:{width:12},copyText:o.message,buttonText:"Copy Error"}),(0,r.jsxs)(s.T,{variant:"light",size:"sm",className:"flex items-center justify-center text-center",onPress:()=>{c({tabName:"AI"}),d({currentDiagram:i,currentError:o,content:"Repair my current diagram"})},children:[(0,r.jsx)(M.LucideIcon,{width:16,icon:f.A})," Repair diagram"]})]})]}):(0,r.jsx)(e8,{})}),(0,r.jsx)("div",{className:(0,m.cn)("z-0 h-full w-full"),children:(0,r.jsxs)(w,{children:[(0,r.jsx)(eb.WZ,{wrapperClass:"!w-full !h-full",contentClass:(0,m.cn)("!h-full !w-full",n),children:(0,r.jsx)(eu.MermaidImage,{imageNodeId:"mermaid-image-editor",className:"p-12",code:i,onRendered:p})}),(0,el.createPortal)((0,r.jsx)(tt,{parent:u,disable:null!=o||a}),null!=(t=document.querySelector(".react-transform-wrapper"))?t:document.body)]})}),(0,r.jsxs)("div",{className:"absolute bottom-0 left-0 z-10 flex -translate-x-[0.125rem] translate-y-[0.125rem] gap-2 p-2",children:[(0,r.jsxs)(R.x,{size:"sm",children:[(0,r.jsx)(z.I,{content:"Undo",children:(0,r.jsx)(s.T,{onPress:()=>{var e;null==h||null==(e=h.editor.getEditors()[0])||e.trigger("mermaid-flow","undo",void 0)},children:(0,r.jsx)(M.LucideIcon,{icon:A.A,height:12})})}),(0,r.jsx)(z.I,{content:"Redo",children:(0,r.jsx)(s.T,{onPress:()=>{var e;null==h||null==(e=h.editor.getEditors()[0])||e.trigger("mermaid-flow","redo",void 0)},children:(0,r.jsx)(M.LucideIcon,{icon:E.A,height:12})})})]}),null!=l&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(R.x,{size:"sm",children:[(0,r.jsx)(s.T,{isIconOnly:!0,onPress:()=>{x.zoomOut(.1,0)},children:(0,r.jsx)(M.LucideIcon,{icon:P.A,height:12})}),(0,r.jsx)(z.I,{content:"Reset view",children:(0,r.jsxs)(s.T,{onPress:()=>{x.resetTransform(0)},children:[Math.round(100*y),"%"]})}),(0,r.jsx)(s.T,{isIconOnly:!0,onPress:()=>{x.zoomIn(.1,0)},children:(0,r.jsx)(M.LucideIcon,{icon:_.A,height:12})})]}),(0,r.jsx)(s.T,{size:"sm",onPress:()=>{x.centerView(x.instance.transformState.scale,0)},children:"Center view"})]})]})]})});function e8(){let e=(0,en.fI)(e=>{var t,a;return null!=(a=null==(t=e.diagram)?void 0:t.interactive)?a:null});return null==e?(0,r.jsx)(r.Fragment,{}):(0,r.jsx)(z.I,{content:e?"This diagram type is visually interactive.\nTry clicking or dragging a node to edit visually.":"This diagram type is not yet visually interactive.\nTry a flowchart diagram to edit visually.",placement:"bottom",className:"whitespace-pre-wrap p-4","data-sentry-element":"Tooltip","data-sentry-component":"InteractivityLabel","data-sentry-source-file":"editor_image.tsx",children:(0,r.jsx)(b._,{hideSymbol:!0,hideCopyButton:!0,color:e?"success":"warning",radius:"none",className:"flex -translate-x-[0.125rem] -translate-y-[0.125rem] items-center justify-center overflow-auto rounded rounded-l-none rounded-t-none py-2 text-tiny dark:bg-background/70",classNames:{pre:"whitespace-pre-wrap"},"data-sentry-element":"Snippet","data-sentry-source-file":"editor_image.tsx",children:e?"Visually interactive":"Not yet visually interactive"})})}function te(e){var t,a;let{children:n}=e,s=ed(e=>e.useDragReceive({key:"nodeDetails"})),i=ed(e=>e.useDragReceive({key:"subgraphDetails"})),l=ed(e=>e.useDragReceive({key:"edgeDetails"})),o=(0,en.fI)(e=>e.addSubgraph),c=(0,en.fI)(e=>e.changeSubgraphParent),d=(0,en.fI)(e=>e.addEdge),u=(0,en.fI)(e=>e.addNode),g=(0,en.fI)(e=>e.changeNodeParent),h=null==(t=s.getData())?void 0:t.depth,p=null==(a=i.getData())?void 0:a.depth,x=null!=h&&0===h||null!=p&&0===p,f=null!=l.getData(),y=(null!=s.getData()||null!=i.getData())&&!x,b=s.isBeingDraggedOver||i.isBeingDraggedOver,v=l.isBeingDraggedOver;return(0,r.jsx)("div",{className:(0,m.cn)("h-full w-full"),"data-sentry-component":"ImageDropTarget","data-sentry-source-file":"editor_image.tsx",children:(0,r.jsx)("div",{id:"image-drop-target",className:(0,m.cn)("border-box relative flex h-full w-full flex-col border-2 border-transparent",{"border-2 border-primary":y&&b||f&&v}),onDrop:e=>{let t=s.onDrop(e);if(null!=t)return void(null==t.id?u({keyParams:t.keyParams,text:t.text}):g({id:t.id,newParentId:null}));let a=i.onDrop(e);if(null!=a)return void(null==a.id?o({keyParams:a.keyParams,text:a.text}):c({id:a.id,newParentId:null}));let n=l.onDrop(e);if(null!=n)return void d({startNodeId:n.startNodeId})},onDragEnter:e=>{s.onDragEnter(e),i.onDragEnter(e),l.onDragEnter(e)},onDragLeave:e=>{s.onDragLeave(e),i.onDragLeave(e),l.onDragLeave(e)},onDragOver:e=>{if(x){e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="none";return}s.onDragOver(e),i.onDragOver(e),l.onDragOver(e)},children:n})})}function tt(e){var t;let{parent:a,disable:n}=e,s=(0,en.fI)(e=>e.diagram),{rect:i,element:l}=Q({element:a,disable:n});return null==s||"flowchart"!==s.type||null==l||null==i||null==a||n?(0,r.jsx)(r.Fragment,{}):(0,r.jsxs)("div",{"data-sentry-component":"ShadowContainers","data-sentry-source-file":"editor_image.tsx",children:[s.nodes.map((e,t)=>(0,r.jsx)(e1,{node:e,parent:a,disable:n},"node-id-".concat(e.id,"-").concat(t))),s.subgraphs.map((e,t)=>(0,r.jsx)(e2,{subgraph:e,parent:a,disable:n},"subgraph-id-".concat(e.id,"-").concat(t))),(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:null!=(t=l.getAttribute("viewBox"))?t:"",style:{position:"fixed",top:i.top,left:i.left,width:i.width,height:i.height,pointerEvents:"none",zIndex:9999999},"data-sentry-element":"svg","data-sentry-source-file":"editor_image.tsx",children:s.edges.map(e=>{let t=CSS.escape(e.domId),s=["#".concat(t),'[id^="'.concat(t,'-"]'),'[id^="'.concat(t,'_"]')];if(e.start===e.end){let t=CSS.escape(e.start);s.push("#".concat(t,"-cyclic-special-0"),"#".concat(t,"-cyclic-special-1"),"#".concat(t,"-cyclic-special-mid"),"#".concat(t,"-cyclic-special-2"))}return(0,r.jsx)("g",{children:s.map(t=>(0,r.jsx)(ec,{selector:t,groupSelectors:s,edge:e,parent:a,disable:n},"edge-control-group-".concat(e.domId,"-").concat(t)))},"edge-control-group-".concat(e.domId))})})]})}var ta=a(71408),tn=a(78139);function tr(e){let{className:t}=e,a=ey(e=>e.verticalSelectedTabs),n=ey(e=>e.setVerticalSelectedTabs),s=Object.values(ag),i=[],l=[],o=null;return"dual"===a.state?(o=ax(a.bottom),i=s.slice(0,o),l=s.slice(o,s.length)):i=s,(0,r.jsxs)(ts,{className:t,"data-sentry-element":"VerticalToolbarContainer","data-sentry-component":"VerticalToolbar","data-sentry-source-file":"editor_toolbar.tsx",children:[(0,r.jsx)("div",{className:"flex-1",children:Object.values(i).map((e,t)=>{var s;let i=af(t-1),l=e=>"none"!==a.state&&e===a.top,c=t+1,d=af(c),u=("dual"===a.state&&null!=o&&c<o||"single"===a.state)&&null!=d&&l(d.name),m=null!=i&&l(i.name);return(0,r.jsx)(ti,{tab:e,isSelected:l(e.name),isPreviousTabSelected:m,isNextTabSelected:u,isBottomTab:null!=o&&(null==(s=af(o-1))?void 0:s.name)===e.name||ap().name===e.name,onPress:()=>{switch(a.state){case"none":n({state:"single",top:e.name});break;case"single":a.top===e.name?n({state:"none"}):n({state:"dual",...ay({top:a.top,bottom:e.name})});break;case"dual":a.top===e.name?n({state:"single",top:a.bottom}):a.bottom===e.name?n({state:"single",top:a.top}):n({state:"dual",...ay({top:a.top,bottom:e.name})})}}},"".concat(e.name,"-vertical-top-toolbar"))})}),(0,r.jsx)("div",{className:"flex-1",children:Object.values(l).map((e,t)=>{let s=t+i.length,l=s-1,c=af(l),d=e=>"dual"===a.state&&e===a.bottom,u=("dual"===a.state&&null!=o&&l>=o||"single"===a.state)&&null!=c&&d(c.name),m=af(s+1),g=null!=m&&d(m.name);return(0,r.jsx)(ti,{tab:e,isSelected:d(e.name),isPreviousTabSelected:u,isNextTabSelected:g,isBottomTab:ap().name===e.name,onPress:()=>{switch(a.state){case"none":n({state:"single",top:e.name});break;case"single":a.top===e.name?n({state:"none"}):n({state:"dual",...ay({top:a.top,bottom:e.name})});break;case"dual":a.top===e.name?n({state:"single",top:a.bottom}):a.bottom===e.name?n({state:"single",top:a.top}):n({state:"dual",...ay({top:a.top,bottom:e.name})})}}},"".concat(e.name,"-vertical-bottom-toolbar"))})})]})}function ts(e){let{children:t,className:a}=e;return(0,r.jsx)("div",{id:"vertical-toolbar",className:(0,m.cn)("flex flex-col bg-default-300",a),"data-sentry-component":"VerticalToolbarContainer","data-sentry-source-file":"editor_toolbar.tsx",children:t})}function ti(e){let{tab:t,isSelected:a,isPreviousTabSelected:n,isNextTabSelected:i,isBottomTab:l,onPress:o}=e;return(0,r.jsx)(ta.N,{"data-sentry-element":"AnimatePresence","data-sentry-component":"VerticalTabButton","data-sentry-source-file":"editor_toolbar.tsx",children:(0,r.jsx)(tn.P.div,{layoutId:"framer-".concat(t.name),layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},"data-sentry-element":"motion.div","data-sentry-source-file":"editor_toolbar.tsx",children:(0,r.jsxs)("div",{className:(0,m.cn)("h-16 w-16",{"bg-background":n||i}),children:[(0,r.jsxs)(s.T,{onPress:o,size:"lg",radius:"none",isIconOnly:!0,className:(0,m.cn)("flex h-full w-full flex-col items-center justify-center gap-1 bg-background p-2",{"bg-default-300":!a,"rounded-tr-lg":n,"rounded-br-lg":i}),"data-sentry-element":"Button","data-sentry-source-file":"editor_toolbar.tsx",children:[(0,r.jsx)("div",{className:"h-[1.6rem]",children:(0,r.jsx)(M.LucideIcon,{icon:t.icon,height:"1.6rem","data-sentry-element":"LucideIcon","data-sentry-source-file":"editor_toolbar.tsx"})}),(0,r.jsx)("p",{className:"pt-1 text-[0.6rem] leading-none",children:t.name})]}),l&&a&&(0,r.jsx)("div",{className:"h-2 w-full bg-background",children:(0,r.jsx)("div",{className:"h-full rounded-tr-lg bg-default-300"})})]})})})}function tl(e){let{className:t}=e,a=ey(e=>e.horizontalSelectedTabs),n=ey(e=>e.setHorizontalSelectedTabs);return(0,r.jsx)("div",{className:(0,m.cn)("flex h-16 w-full justify-center",t),"data-sentry-component":"HorizontalToolbar","data-sentry-source-file":"editor_toolbar.tsx",children:Object.values(ag).map((e,t)=>{let s=e=>"single"===a.state&&a.top===e.name,i=af(t-1),l=af(t+1);return(0,r.jsx)(to,{isPreviousTabSelected:void 0!=i&&s(i),isNextTabSelected:void 0!=l&&s(l),isSelected:"single"===a.state&&a.top===e.name,tab:e,onPress:()=>{switch(a.state){case"none":n({state:"single",top:e.name});break;case"single":a.top===e.name?n({state:"none"}):n({state:"single",top:e.name})}}},"".concat(e.name,"-horizontal-toolbar"))})})}function to(e){let{tab:t,isSelected:a,isNextTabSelected:n,isPreviousTabSelected:i,onPress:l}=e;return(0,r.jsx)("div",{className:(0,m.cn)("flex h-16 w-full flex-col items-center justify-center gap-1",{"bg-background":i||n}),"data-sentry-component":"HorizontalTabButton","data-sentry-source-file":"editor_toolbar.tsx",children:(0,r.jsxs)(s.T,{onPress:l,size:"lg",radius:"none",isIconOnly:!0,className:(0,m.cn)("h-full w-full",{"bg-background":a,"bg-default-300":!a,"rounded-tl-lg":i,"rounded-tr-lg":n}),"data-sentry-element":"Button","data-sentry-source-file":"editor_toolbar.tsx",children:[(0,r.jsx)("div",{className:"h-[1.6rem]",children:(0,r.jsx)(M.LucideIcon,{icon:t.icon,height:"1.6rem","data-sentry-element":"LucideIcon","data-sentry-source-file":"editor_toolbar.tsx"})}),(0,r.jsx)("p",{className:"pt-1 text-[0.6rem] leading-none",children:t.name})]})})}var tc=a(94703),td=a(48432),tu=a(24792),tm=a(84901),tg=a(10051),th=a(32795),tp=a(68880),tx=a(22896),tf=a(7186),ty=a(4286),tb=a(90079),tv=a(33800),tw=a(60131);function tj(e){let{actions:t}=e;return(0,r.jsx)("div",{className:"flex w-full flex-col gap-2","data-sentry-component":"PromptActions","data-sentry-source-file":"prompt_actions.tsx",children:(0,r.jsx)(u.H,{className:"flex flex-col gap-2",orientation:"vertical",offset:10,"data-sentry-element":"ScrollShadow","data-sentry-source-file":"prompt_actions.tsx",children:t.map((e,t)=>{let{title:a,description:n,onPress:i}=e;return(0,r.jsxs)(s.T,{className:"flex h-12 flex-col items-start gap-0 border border-success",variant:"flat",color:"success",onPress:i,children:[(0,r.jsx)("p",{children:a}),(0,r.jsx)("p",{className:"text-tiny",children:n})]},t)})})})}let tk=N.forwardRef((e,t)=>{let{classNames:a={},...n}=e;return(0,r.jsx)(O.P,{ref:t,"aria-label":"Prompt",classNames:{...a,innerWrapper:(0,m.cn)("items-center",null==a?void 0:a.innerWrapper),label:(0,m.cn)("hidden",null==a?void 0:a.label),input:(0,m.cn)("py-0",null==a?void 0:a.input)},rows:1,placeholder:"Enter a prompt here",radius:"lg",size:"sm",...n})});tk.displayName="PromptInput";var tI=function(e){return e.UNAUTHENTICATED="You need to be logged in to use this feature",e.UNAUTHORIZED="Upgrade to a Mermaid Flow Premium plan to use this feature",e.PROMPT_EMPTY="Please enter a prompt",e.PROMPT_TOO_BIG="You're prompt is too large, please enter a smaller prompt",e.UNKNOWN="An unknown error occurred, please contact support",e.EXCEEDED_RATE_LIMIT="Rate limit exceeded, please contact support.",e}({});tm.A.rotate=-45;let tN=(0,N.memo)(function(e){let{src:t}=e;return(0,r.jsx)(tg.Q,{ignoreFallback:!0,src:t,alt:"mermaid-ai-chat-avatar"})});function tT(e){let{UserAvatar:t,AssistantAvatar:a}=e,n=ef(e=>e.messages);return(0,r.jsxs)("div",{className:"flex flex-col","data-sentry-component":"Conversation","data-sentry-source-file":"ai_tab.tsx",children:[(0,r.jsx)(tx.f,{y:8,"data-sentry-element":"Spacer","data-sentry-source-file":"ai_tab.tsx"}),n.map((e,s)=>(0,r.jsx)(tC,{message:e,lastMessage:s===n.length-1,AssistantAvatar:a,UserAvatar:t},"".concat(e.content+s)))]})}let tS=RegExp("(```mermaid\\n.+?)```\\n?","gs"),tD="```mermaid\n";function tC(e){let{message:t,lastMessage:a,UserAvatar:n,AssistantAvatar:i}=e,l=ef(e=>e.regenerate),o=ef(e=>e.loading),c=(0,en.fI)(e=>e.diagramText),d=(0,en.fI)(e=>e.error);return(0,r.jsxs)("div",{className:(0,m.cn)("text-md flex w-full flex-col gap-2 p-2 font-light",{"items-start":"assistant"===t.role,"items-end":"user"===t.role}),"data-sentry-component":"MessageBubble","data-sentry-source-file":"ai_tab.tsx",children:[(0,r.jsxs)("div",{className:(0,m.cn)("flex w-full flex-col gap-2",{"items-start":"assistant"===t.role,"items-end":"user"===t.role}),children:[(0,r.jsx)("div",{className:(0,m.cn)("flex max-w-full flex-col rounded-xl border-1 border-foreground/20 bg-default-200 p-2",{"!border-success/20 bg-success/20":"user"===t.role}),children:(0,r.jsx)(tP,{messageContent:t.content,lastMessage:a,"data-sentry-element":"MessageBubbleText","data-sentry-source-file":"ai_tab.tsx"})}),"assistant"===t.role&&(0,r.jsxs)("div",{className:"flex gap-1",children:[(0,r.jsx)("div",{children:i}),(!a||!o)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(z.I,{content:"Copy message",delay:1e3,children:(0,r.jsx)("div",{children:(0,r.jsx)(B.CopyTextButton,{buttonProps:{isIconOnly:!0,size:"sm",variant:"light"},iconProps:{width:12},copyText:t.content})})}),(0,r.jsx)(z.I,{content:"Regenerate message",delay:1e3,children:(0,r.jsx)(s.T,{isIconOnly:!0,size:"sm",variant:"light",isDisabled:o,onPress:()=>{l({currentDiagram:c,currentError:d})},children:(0,r.jsx)(M.LucideIcon,{icon:tu.A,width:12})})})]})]})]}),"user"===t.role&&(0,r.jsx)("div",{children:n})]})}let tP=(0,N.memo)(function(e){let{messageContent:t,lastMessage:a}=e,n=t.split(tS).map(e=>e.startsWith(tD)?{type:"diagram",content:e.replace(tD,"")}:{type:"dialogue",content:e});return(0,r.jsx)(r.Fragment,{children:n.map((e,t)=>(0,r.jsx)(t_,{messageFragment:e,lastMessage:a},e.type+e.content+t))})}),t_=(0,N.memo)(function(e){let{messageFragment:t,lastMessage:a}=e,n=(0,en.fI)(e=>e.setDiagramText),i=ef(e=>e.loading);switch(t.type){case"diagram":return(0,r.jsxs)("div",{className:"text-tiny",children:[(0,r.jsx)(th.m,{radius:"sm",className:"w-full whitespace-pre border border-secondary bg-secondary/20 text-foreground",children:(0,r.jsx)(u.H,{hideScrollBar:!0,orientation:"horizontal",children:t.content})}),(!a||!i)&&(0,r.jsxs)("div",{className:"flex w-full cursor-auto flex-wrap items-center justify-between gap-2 pt-1 font-semibold",children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,r.jsxs)(s.T,{variant:"light",className:"font-semibold",color:"success",size:"sm",onPress:()=>{n({text:t.content})},children:[(0,r.jsx)(M.LucideIcon,{icon:_.A,width:12}),"Use diagram"]}),(0,r.jsx)(B.CopyTextButton,{buttonProps:{size:"sm",variant:"light",color:"success",className:"font-semibold"},iconProps:{width:12},copyText:t.content,buttonText:"Copy"})]}),(0,r.jsx)("div",{className:"w-14",children:(0,r.jsx)(S,{children:(0,r.jsx)(tE,{diagram:t.content})})})]})]});case"dialogue":return(0,r.jsx)("p",{className:"whitespace-break-spaces break-words",children:t.content})}},(e,t)=>e.messageFragment.type===t.messageFragment.type&&e.messageFragment.content===t.messageFragment.content),tE=(0,N.memo)(function(e){let{diagram:t}=e,a=(0,N.useMemo)(()=>(0,tw.Eh)(t),[t]),n=(0,N.use)(a);return(0,r.jsx)(z.I,{delay:1e3,content:n?"This is a valid mermaid diagram":"This diagram has an error, try regenerating or repairing it with AI",children:(0,r.jsx)("div",{className:(0,m.cn)("w-full text-right",{"text-success":n,"text-warning":!n}),children:n?"Valid":"Invalid"})})});var tA=a(5924),tL=a(39877),tR=a(63429),tz=a(79984),tB=a(19471),tM=a(45302),tO=a(5642),tF=a(15065),tH=a(89555);let tV=(0,ep.v)()((0,ex.Zr)((e,t)=>({imageFormat:"png",setImageFormat:t=>e(()=>({imageFormat:t})),pixelRatio:1,setPixelRatio:t=>e(()=>({pixelRatio:t})),transparentBackground:!1,setTransparentBackground:t=>e(()=>({transparentBackground:t}))}),{name:"export-store"}));async function tW(e){return e.then(e=>fetch("".concat(e)).then(e=>e.blob()))}async function tK(e){let t=new ClipboardItem({"image/png":e});await navigator.clipboard.write([t])}async function tY(e){let t=tW(e);return await tK(t),t}var tZ=a(27620),tU=a.n(tZ),tq=a(23311),t$=a(90844),tG=a(55172),tX=a(37485),tQ=a(26302);let tJ={1:1,2:2,3:5,4:10,5:20,6:100},t0=Object.keys(tJ).toSorted().map(e=>parseInt(e)),t1={1:1,2:2,5:3,10:4,20:5,100:6};function t2(e){let{href:t}=e,a=(0,tQ.sf)();return(0,r.jsx)("div",{className:"flex h-full w-full select-none items-center justify-center bg-background","data-sentry-component":"PremiumLockedContent","data-sentry-source-file":"export_tab.tsx",children:(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,r.jsx)(M.LucideIcon,{className:"inline-block",icon:tc.A,width:32,"data-sentry-element":"LucideIcon","data-sentry-source-file":"export_tab.tsx"}),"High quality exports are a premium feature.",(0,r.jsx)(tb.k,{href:t,onPress:()=>{a.capture("Get premium pressed",{location:"ExportTab",href:t})},"data-sentry-element":"SubtleLink","data-sentry-source-file":"export_tab.tsx",children:"Get Premium."})]})})}async function t5(e){await tY(t7(e))}async function t3(e,t){let a=document.getElementById("mermaid-image-editor");if(null==a)throw Error("Can't find mermaid image editor node to create png");let n=new tG.Ay({unit:"px",format:[1123,794]}),{height:r,width:s}=(0,G.Z0)({width:a.clientWidth,height:a.clientHeight,targetWidth:794,targetHeight:1123});n.addImage({imageData:await (0,tq.mo)(a,{pixelRatio:t.pixelRatio,backgroundColor:"transparent"===t.backgroundColor?"white":t.backgroundColor}),x:0,y:0,width:s,height:r}),n.save(e)}async function t4(e){let t=document.getElementById("mermaid-image-editor");if(null==t)throw Error("Can't find mermaid image editor node to copy svg");await navigator.clipboard.writeText(ae(t,e))}async function t9(e,t){tU()(await t7(t),e)}async function t6(e,t){let a=await t8(t);tU()(a,e)}async function t7(e){let{backgroundColor:t,pixelRatio:a}=e,n=document.getElementById("mermaid-image-editor");if(null==n)throw Error("Can't find mermaid image editor node to create png");return await (0,tq.$E)(n,{backgroundColor:t,pixelRatio:a})}async function t8(e){var t,a;let{backgroundColor:n}=e,r=document.getElementById("mermaid-image-editor");if(null==r)throw Error("Can't find mermaid image editor node to create png");return t=r,a={backgroundColor:n},"data:image/svg+xml;base64,".concat(t$.o4.encode(ae(t,a)))}function ae(e,t){let a=e.style.background;null!=t.backgroundColor&&(e.style.background=t.backgroundColor);let n=e.outerHTML.replaceAll("<br>","<br/>").replaceAll(/<img([^>]*)>/g,(e,t)=>"<img ".concat(t," />"));return e.style.background=a,'<?xml version="1.0" encoding="UTF-8"?>\n<?xml-stylesheet href="'.concat("https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css",'" type="text/css"?>\n').concat(n)}var at=a(20244),aa=a(5379);function an(){let e=function(){let{resolvedTheme:e}=(0,aa.D)();switch(e){case"light":default:return"mermaid-light";case"dark":return"mermaid-dark"}}(),t=(0,en.fI)(e=>e.diagramText),a=(0,en.fI)(e=>e.editorText),n=(0,en.fI)(e=>e.setEditorText),s=(0,en.fI)(e=>e.hasHydrated),i=(0,en.fI)(e=>e.error),l=(0,en.fI)(e=>e.setDiagramText),o=ey(e=>e.setTab),c=(0,L.dJ)();return(0,N.useEffect)(()=>{s&&(console.info("Hydrating"),l({text:t}))},[s]),(0,N.useEffect)(()=>{if(null==c)return;let e=c.editor.getModels()[0];if(null!=e){if(null==i||null==i.location)return void c.editor.setModelMarkers(e,"owner",[]);c.editor.setModelMarkers(e,"owner",[{startLineNumber:i.location.firstLine,startColumn:i.location.firstColumn,endLineNumber:i.location.lastLine,endColumn:i.location.lastColumn,severity:c.MarkerSeverity.Error,message:i.message}])}},[i,c]),(0,r.jsx)(L.Ay,{path:"/mermaid-flow",saveViewState:!0,beforeMount:e=>{(0,at.A)(e),e.editor.defineTheme("mermaid-light",{base:"vs",colors:{"editor.background":"#ffffff"},inherit:!0,rules:[]}),e.editor.defineTheme("mermaid-dark",{base:"vs-dark",colors:{"editor.background":"#000000"},inherit:!0,rules:[]})},onMount:e=>{document.onkeydown=t=>{if(t.metaKey&&t.shiftKey&&"z"===t.key||t.ctrlKey&&"y"===t.key){o({tabName:"Text"}),console.info("sending redo to editor tab"),t.stopPropagation(),t.preventDefault(),e.trigger("mermaid-flow","redo",void 0);return}if(t.metaKey&&"z"===t.key||t.ctrlKey&&"z"===t.key){o({tabName:"Text"}),console.info("sending undo to editor tab"),t.stopPropagation(),t.preventDefault(),e.trigger("mermaid-flow","undo",void 0);return}}},language:"mermaid",defaultLanguage:"mermaid",theme:e,loading:(0,r.jsx)("div",{className:"flex h-full w-full items-center justify-center",children:(0,r.jsx)(I.o,{size:"lg"})}),options:{scrollBeyondLastLine:!1,quickSuggestions:!1,minimap:{enabled:!1},padding:{bottom:8},insertSpaces:!0,tabSize:4,scrollbar:{horizontalScrollbarSize:8,verticalScrollbarSize:8,alwaysConsumeMouseWheel:!1,horizontal:"auto",vertical:"auto",useShadows:!1}},value:a,onChange:e=>{null!=e&&n({text:e})},"data-sentry-element":"Editor","data-sentry-component":"MonacoTextEditor","data-sentry-source-file":"text_tab.tsx"})}var ar=a(79368),as=a(23327);function ai(){let[e,t]=(0,N.useState)(""),a=(0,N.useRef)(null);return(0,r.jsx)("div",{"data-sentry-component":"StartNewDiagram","data-sentry-source-file":"visual_tab.tsx",children:(0,r.jsx)(eV,{ref:a,distance:388,title:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(ej.r,{variant:"faded",placeholder:"Search diagrams",value:e,onValueChange:t}),(0,r.jsx)(z.I,{content:"Click below to start a new sample diagram",children:(0,r.jsx)("div",{children:(0,r.jsx)(M.LucideIcon,{icon:ev.A})})})]}),"data-sentry-element":"ControlledScroll","data-sentry-source-file":"visual_tab.tsx",children:(0,G.AS)(e.length>=1?eE().go(e,ar.eO,{key:"name"}).map(e=>e.obj):ar.eO).map(e=>{let[t,a]=e;return null==t&&null==a?(0,r.jsx)(r.Fragment,{}):(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[null!=t&&(0,r.jsx)(al,{diagram:t}),null!=a&&(0,r.jsx)(al,{diagram:a})]},"".concat(null==t?void 0:t.name,"-").concat(null==a?void 0:a.name))})})})}function al(e){let{diagram:t}=e,a=(0,en.fI)(e=>e.setDiagramText),n=(0,en.fI)(e=>{var t,a;return null!=(a=null==(t=e.diagram)?void 0:t.type)?a:null}),i=(0,en.fI)(e=>e.diagramText),l=n===t.type,o=null!=n&&ar.d$[n].initialDiagramText===i,c=l&&"info"!==t.type,d=!o&&l;return(0,r.jsx)(s.T,{color:d?"warning":c?"secondary":"success",variant:"flat",className:"w-full",onPress:()=>{d?a({text:""}):c?a({text:t.sampleDiagramText}):a({text:t.initialDiagramText})},"data-sentry-element":"Button","data-sentry-component":"DiagramButton","data-sentry-source-file":"visual_tab.tsx",children:d?"Clear diagram":c?"Insert sample":t.name})}function ao(e){let{diagramType:t}=e;return(0,r.jsxs)("div",{className:"flex flex-col","data-sentry-component":"NotInteractive","data-sentry-source-file":"visual_tab.tsx",children:[(0,r.jsx)("div",{className:"px-10 pt-2 text-xl font-bold",children:"Interactivity coming soon"}),(0,r.jsxs)("div",{className:"px-10 pt-2 text-small",children:["The ",ar.d$[t].name," diagram is not yet visually interactive, this feature is coming soon."]}),(0,r.jsx)("div",{className:"px-10 pt-2 font-bold text-small",children:"In the meantime try a Flowchart diagram!"})]})}var ac=a(92015),ad=a(18514),au=a(20063),am=a(15279);let ag={Text:{name:"Text",icon:y.A,Component:function(e){return(0,r.jsx)("div",{className:(0,m.cn)("relative h-full w-full py-4"),"data-sentry-component":"TextTab","data-sentry-source-file":"text_tab.tsx",children:(0,r.jsx)(an,{})})},order:1},Settings:{name:"Settings",icon:h.A,Component:function(e){let t=(0,en.fI)(e=>e.updateFrontMatter),{config:a,title:n}=(0,en.fI)(e=>e.frontMatter);return(0,r.jsxs)("div",{className:(0,m.cn)("relative flex h-full w-full flex-col gap-2 py-4"),"data-sentry-component":"SettingsTab","data-sentry-source-file":"settings_tab.tsx",children:[(0,r.jsx)("div",{className:"flex w-full items-center justify-center font-bold text-medium",children:"Diagram config"}),(0,r.jsx)("div",{className:"flex items-center justify-between gap-2 px-2",children:(0,r.jsx)(O.P,{label:"Title",labelPlacement:"outside",variant:"flat",minRows:0,value:null!=n?n:"",onValueChange:e=>t({title:e}),"data-sentry-element":"Textarea","data-sentry-source-file":"settings_tab.tsx"})}),(0,r.jsxs)("div",{className:"flex items-center justify-between gap-2 px-2",children:[(0,r.jsxs)(tO.d,{label:"Theme",labelPlacement:"outside",variant:"faded",defaultSelectedKeys:["default"],selectedKeys:[a.theme],onSelectionChange:e=>{let[a]=e;null!=a&&t({config:{theme:a}})},description:"The theme of your diagram.","data-sentry-element":"Select","data-sentry-source-file":"settings_tab.tsx",children:[(0,r.jsx)(tF.y,{"data-sentry-element":"SelectItem","data-sentry-source-file":"settings_tab.tsx",children:"Light"},"default"),(0,r.jsx)(tF.y,{"data-sentry-element":"SelectItem","data-sentry-source-file":"settings_tab.tsx",children:"Dark"},"dark"),(0,r.jsx)(tF.y,{"data-sentry-element":"SelectItem","data-sentry-source-file":"settings_tab.tsx",children:"Forest"},"forest"),(0,r.jsx)(tF.y,{"data-sentry-element":"SelectItem","data-sentry-source-file":"settings_tab.tsx",children:"Neutral"},"neutral"),(0,r.jsx)(tF.y,{"data-sentry-element":"SelectItem","data-sentry-source-file":"settings_tab.tsx",children:"Base"},"base")]}),(0,r.jsx)(s.T,{variant:"flat",color:"warning",disabled:a.theme===en.sb.theme,onPress:()=>t({config:{theme:en.sb.theme}}),"data-sentry-element":"Button","data-sentry-source-file":"settings_tab.tsx",children:"Reset"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between gap-2 px-2",children:[(0,r.jsxs)(tO.d,{label:"Look",labelPlacement:"outside",variant:"faded",selectedKeys:[a.look],onSelectionChange:e=>{let[a]=e;null!=a&&t({config:{look:a}})},description:"The drawing style of your diagram.","data-sentry-element":"Select","data-sentry-source-file":"settings_tab.tsx",children:[(0,r.jsx)(tF.y,{"data-sentry-element":"SelectItem","data-sentry-source-file":"settings_tab.tsx",children:"Classic"},"classic"),(0,r.jsx)(tF.y,{"data-sentry-element":"SelectItem","data-sentry-source-file":"settings_tab.tsx",children:"Hand drawn"},"handDrawn")]}),(0,r.jsx)(s.T,{variant:"flat",color:"warning",disabled:a.look===en.sb.look,onPress:()=>t({config:{look:en.sb.look}}),"data-sentry-element":"Button","data-sentry-source-file":"settings_tab.tsx",children:"Reset"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between gap-2 px-2",children:[(0,r.jsxs)(tO.d,{label:"Layout",labelPlacement:"outside",variant:"faded",selectedKeys:[a.layout],onSelectionChange:e=>{let[a]=e;null!=a&&t({config:{layout:a}})},description:"The layout style of your diagram.","data-sentry-element":"Select","data-sentry-source-file":"settings_tab.tsx",children:[(0,r.jsx)(tF.y,{"data-sentry-element":"SelectItem","data-sentry-source-file":"settings_tab.tsx",children:"Default"},"dagre"),(0,r.jsx)(tF.y,{"data-sentry-element":"SelectItem","data-sentry-source-file":"settings_tab.tsx",children:"Elk"},"elk"),(0,r.jsx)(tF.y,{"data-sentry-element":"SelectItem","data-sentry-source-file":"settings_tab.tsx",children:"Elk Stress"},"elk.stress")]}),(0,r.jsx)(s.T,{variant:"flat",color:"warning",disabled:a.layout===en.sb.layout,onPress:()=>t({config:{layout:en.sb.layout}}),"data-sentry-element":"Button","data-sentry-source-file":"settings_tab.tsx",children:"Reset"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between gap-2 px-2",children:[(0,r.jsx)(ej.r,{labelPlacement:"outside",variant:"faded",type:"number",step:1e3,label:"Max text size",description:"The maximum number of characters allowed in the diagram.",defaultValue:en.sb.maxTextSize.toString(),min:0,max:Number.MAX_SAFE_INTEGER,value:a.maxTextSize.toString(),onValueChange:e=>t({config:{maxTextSize:parseInt(e)}}),"data-sentry-element":"Input","data-sentry-source-file":"settings_tab.tsx"}),(0,r.jsx)(s.T,{variant:"flat",color:"warning",disabled:a.maxTextSize===en.sb.maxTextSize,onPress:()=>t({config:{maxTextSize:en.sb.maxTextSize}}),"data-sentry-element":"Button","data-sentry-source-file":"settings_tab.tsx",children:"Reset"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between gap-2 px-2",children:[(0,r.jsx)(ej.r,{variant:"faded",type:"number",step:10,label:"Max edges",labelPlacement:"outside",description:"The maximum number of edges allowed in the diagram.",defaultValue:en.sb.maxEdges.toString(),min:0,max:Number.MAX_SAFE_INTEGER,value:a.maxEdges.toString(),onValueChange:e=>t({config:{maxEdges:parseInt(e)}}),"data-sentry-element":"Input","data-sentry-source-file":"settings_tab.tsx"}),(0,r.jsx)(s.T,{variant:"flat",color:"warning",disabled:a.maxEdges===en.sb.maxEdges,onPress:()=>t({config:{maxEdges:en.sb.maxEdges}}),"data-sentry-element":"Button","data-sentry-source-file":"settings_tab.tsx",children:"Reset"})]})]})},order:2},Visual:{name:"Visual",icon:x.A,Component:function(e){let{}=e,t=(0,en.fI)(e=>{var t,a;return null!=(a=null==(t=e.diagram)?void 0:t.type)?a:null}),a=(0,en.fI)(e=>{var t,a;return null!=(a=null==(t=e.diagram)?void 0:t.interactive)&&a}),n=(0,en.fI)(e=>e.error),s=(0,en.fI)(e=>e.addNode),i=(0,en.fI)(e=>e.addSubgraph);return(0,r.jsxs)("div",{className:"flex w-full flex-col gap-2 px-2 py-4","data-sentry-component":"VisualTab","data-sentry-source-file":"visual_tab.tsx",children:[(0,r.jsx)("div",{children:(0,r.jsx)(ai,{"data-sentry-element":"StartNewDiagram","data-sentry-source-file":"visual_tab.tsx"})}),"flowchart"===t&&null==n&&(0,r.jsx)(e$,{ToolTip:(0,r.jsx)(z.I,{content:"Click or drag elements to the diagram image or subgraphs within the image",children:(0,r.jsx)("div",{children:(0,r.jsx)(as.A,{size:16})})}),onPressSubgraph:()=>{i({keyParams:{key:"subgraph",type:"subgraph"},text:eY.jw.name})},onPressShape:e=>{s({keyParams:{key:e.shortName,type:"node-shape"},text:e.name})},addOnDrag:!0}),null!=t&&!a&&(0,r.jsx)(ao,{diagramType:t})]})},order:3},AI:{name:"AI",icon:f.A,Component:function(e){var t,a;let{session:n,tierKey:i}=e,l=(0,en.fI)(e=>e.diagramText),o=(0,en.fI)(e=>e.error),c=ef(e=>e.prompt),d=ef(e=>e.setPrompt),g=ef(e=>e.setErrorMessage),h=ef(e=>e.reset),p=ef(e=>e.cancel),x=ef(e=>e.sendUserMessage),f=ef(e=>e.errorMessage),y=ef(e=>e.messages.length<=0),b=ef(e=>e.loading),v=(0,N.useRef)(null);return(0,r.jsx)(tv.AuthLockedContent,{className:(0,m.cn)("flex h-full w-full flex-col items-center justify-start gap-2",{relative:(null==n?void 0:n.user)!=null&&"premium"===i}),tierKey:i,session:n,showLock:f===tI.UNAUTHENTICATED||f===tI.UNAUTHORIZED,AuthLockedContent:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("h1",{className:"flex items-center justify-center gap-2 text-xl",children:[(0,r.jsx)(M.LucideIcon,{className:"inline-block",icon:tc.A,width:32}),"Sign in to unlock Mermaid Flow AI"]}),(0,r.jsx)("div",{className:"text-pretty px-4 text-center",children:"Unlock your creativity with the power of Mermaid Flow AI."}),(0,r.jsx)("div",{className:"flex flex-col gap-2 xl:flex-row",children:(0,r.jsx)(tf.SignInAndUpButtons,{title:"Continue",color:"success",size:"md"})})]}),PremiumLockedContent:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("h1",{className:"flex items-center justify-center gap-2 text-xl",children:[(0,r.jsx)(M.LucideIcon,{className:"inline-block",icon:tc.A,width:32}),"Unlock state of the art generative AI with Premium"]}),(0,r.jsx)("p",{className:"text-pretty px-4 text-center",children:"Creating diagrams with AI is a premium feature and requires a subscription to the Mermaid Flow premium plan."}),(0,r.jsx)("div",{className:"flex w-full flex-col items-center",children:(0,r.jsx)(s.T,{as:tp.h,href:"/pricing",color:"success",variant:"flat",size:"lg",children:"See pricing"})})]}),"data-sentry-element":"AuthLockedContent","data-sentry-component":"AiTab","data-sentry-source-file":"ai_tab.tsx",children:(0,r.jsxs)("div",{className:"flex h-full w-full flex-col justify-between px-2 pb-2",children:[y?(0,r.jsxs)("div",{className:"flex h-full flex-col items-center justify-center gap-2 py-4",children:[(0,r.jsx)("div",{className:"rounded-full bg-success/20",children:(0,r.jsx)(M.MermaidIcon,{size:48})}),(0,r.jsxs)("div",{className:"flex items-center justify-center",children:[(0,r.jsx)("p",{className:"animate-typing overflow-hidden whitespace-nowrap pr-1 text-center text-lg",children:"Design, Modify, Perfect."}),(0,r.jsx)("span",{className:"inline h-[60%] w-[2px] animate-pulse bg-white"})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.T,{size:"sm",radius:"none",className:"absolute right-0 z-10 flex items-center justify-center rounded-bl-md border border-r-0 border-t-0 border-default bg-background",onPress:()=>{h()},children:[(0,r.jsx)("p",{children:"New chat"}),(0,r.jsx)(M.LucideIcon,{icon:td.A})]}),(0,r.jsx)(u.H,{hideScrollBar:!0,size:6,className:"flex flex-col-reverse",children:(0,r.jsx)(tT,{UserAvatar:(0,r.jsx)(tN,{src:null!=(a=null==n||null==(t=n.user)?void 0:t.image)?a:""}),AssistantAvatar:(0,r.jsx)(tN,{src:"/mermaid-flow-icon-transparent.png"})})})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[y&&(0,r.jsx)(tj,{actions:[{title:"Create a diagram",description:"describing the linux file system",onPress:()=>{x({content:"Create a diagram describing the linux file system in as much detail as possible",currentDiagram:l,currentError:o})}},{title:"Repair my diagram",description:"with the minimal changes necessary",onPress:()=>{x({content:"Repair my current diagram with as minimal changes as possible",currentDiagram:l,currentError:o})}},{title:"Modify my diagram",description:"make all rectangle nodes blue",onPress:()=>{x({content:"Modify my diagram by making all the rectangle nodes blue, if I don't currently have a diagram create one",currentDiagram:l,currentError:o})}},{title:"Explain how to link",description:"two nodes together",onPress:()=>{x({content:"How do I link two nodes together",currentDiagram:l,currentError:o})}}]}),b&&(0,r.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex w-full animate-typing items-center gap-1 overflow-hidden whitespace-nowrap",children:[(0,r.jsx)("p",{className:"text-foreground-700 text-small",children:"Thinking..."}),(0,r.jsx)("span",{className:"inline h-[14px] w-[2px] animate-pulse bg-white"})]}),(0,r.jsx)(tb.k,{className:"text-tiny",color:"danger",onPress:()=>{p()},children:"Stop"})]}),(0,r.jsxs)("form",{ref:v,onSubmit:e=>{e.preventDefault(),x({content:c,currentDiagram:l,currentError:o})},children:[(0,r.jsx)(tk,{maxRows:5,minRows:1,value:c,onValueChange:e=>{g(null),d(e)},variant:"faded",radius:"full",isInvalid:null!=f,errorMessage:f,isRequired:!0,isDisabled:b,disabled:b,onKeyDown:e=>{if("Enter"===e.key&&!e.shiftKey){var t;e.preventDefault(),null==(t=v.current)||t.requestSubmit()}},endContent:(0,r.jsx)("div",{className:"flex h-full flex-col justify-end",children:(0,r.jsx)(z.I,{content:"Send message",delay:1e3,placement:"bottom",children:(0,r.jsx)("div",{children:(0,r.jsx)(ty.b,{isIconOnly:!0,color:c?"success":"default",isDisabled:!c,radius:"full",size:"sm",variant:"flat",children:(0,r.jsx)(M.LucideIcon,{className:(0,m.cn)(c?"text-primary-foreground":"text-default-600"),icon:tm.A,width:20})})})})}),"data-sentry-element":"PromptInput","data-sentry-source-file":"ai_tab.tsx"}),(0,r.jsxs)("div",{className:"flex w-full items-center justify-between p-1 text-default-400 text-tiny",children:[(0,r.jsx)("p",{children:"Mermaid Flow AI may occasionally make mistakes"}),(0,r.jsxs)("p",{children:[c.length,"/",2e3]})]})]})]})]})})},order:4},Export:{name:"Export",icon:p.A,Component:function(e){let{session:t,tierKey:a}=e,n=(0,en.fI)(e=>e.diagramText),l=(0,en.fI)(e=>e.diagram),o=tV(e=>e.imageFormat),c=tV(e=>e.setImageFormat),d=tV(e=>e.pixelRatio),m=t1["".concat(d)],h=tV(e=>e.setPixelRatio),p=tV(e=>e.transparentBackground),x=tV(e=>e.setTransparentBackground),f=p?"transparent":tX.A.mermaidAPI.getConfig().themeVariables.background,[y,v]=(0,N.useState)("default"),[w,j]=(0,N.useState)("default"),[k,I]=(0,N.useState)("default"),[T,S]=(0,N.useState)(null),D=(0,tQ.sf)(),C=(0,g.a)(),P=null!==l,_="png"===o||"pdf"===o,E="mermaid-flow".concat(p?"-transparent":"").concat(_?"-".concat(d,"x"):""),A=t0.length-!!C;return(0,r.jsxs)("div",{className:"flex h-full w-full flex-col items-center justify-start gap-2 px-2 py-4","data-sentry-component":"ExportTab","data-sentry-source-file":"export_tab.tsx",children:[(0,r.jsx)("div",{className:"text-md w-full font-bold",children:"Export diagram image"}),(0,r.jsxs)(tO.d,{className:"rounded-lg",variant:"faded",selectionMode:"single",value:o,selectedKeys:[o],disallowEmptySelection:!0,onChange:e=>{var t;c(null!=(t=e.target.value)?t:"png")},label:"Image format",isDisabled:!P,"data-sentry-element":"Select","data-sentry-source-file":"export_tab.tsx",children:[(0,r.jsx)(tF.y,{"data-sentry-element":"SelectItem","data-sentry-source-file":"export_tab.tsx",children:"PNG"},"png"),(0,r.jsx)(tF.y,{"data-sentry-element":"SelectItem","data-sentry-source-file":"export_tab.tsx",children:"PDF"},"pdf"),(0,r.jsx)(tF.y,{"data-sentry-element":"SelectItem","data-sentry-source-file":"export_tab.tsx",children:"SVG"},"svg")]}),(0,r.jsxs)("div",{className:"flex w-full flex-col gap-2 p-2",children:[_&&(0,r.jsx)(tv.AuthLockedContent,{AuthLockedContent:(0,r.jsx)(t2,{href:"/editor?sign-up=true"}),PremiumLockedContent:(0,r.jsx)(t2,{href:"/pricing"}),tierKey:a,session:t,children:(0,r.jsx)(z.I,{delay:3e3,content:"Higher quality results in better resolution images.",children:(0,r.jsx)(tH.Q,{label:"Quality",value:m,hideValue:!0,onChange:e=>{let t=tJ["".concat(e)];t!==d&&D.capture("PNG pixel ratio changed",{"Pixel ratio":t}),h(t)},minValue:t0[0],maxValue:t0[A-1],marks:Object.entries(tJ).toSorted().slice(0,A).map(e=>{let[t,a]=e;return{value:parseInt(t),label:"".concat(a,"x")}}),step:1,showSteps:!0})})}),(0,r.jsx)(tM.A,{color:"success",isSelected:p,onValueChange:e=>x(e),"data-sentry-element":"Checkbox","data-sentry-source-file":"export_tab.tsx",children:"Transparent background"})]}),(0,r.jsxs)("div",{className:"flex w-full gap-4",children:["pdf"!==o&&(0,r.jsxs)(s.T,{className:"w-full",color:"success",variant:"flat",isDisabled:!P||"default"!==w,onPress:async()=>{requestAnimationFrame(()=>console.info("Copying ".concat(o," diagram: '").concat(n,"'"))),S(null);try{if(j("loading"),"png"===o)await t5({pixelRatio:d,backgroundColor:f});else if("svg"===o)await t4({backgroundColor:f});else throw Error("unknown image format: ".concat(o));j("loaded"),setTimeout(()=>{j("default")},3e3)}catch(e){if(j("default"),e instanceof Error&&"ClipboardItem is not defined"===e.message){console.warn(e.message),S("This clipboard operation is not supported in your browser.\nTry downloading instead.");return}eI.F.error(e),S("An unexpected error occurred")}},children:[(0,r.jsx)(M.LucideIcon,{icon:"loaded"===w?tA.A:"loading"===w?tB.A:tR.A}),"loaded"===w?"Copied":"loading"===w?"Copying":"Copy"]}),(0,r.jsxs)(s.T,{className:"w-full",color:"success",variant:"flat",isDisabled:!P||"default"!==k,onPress:async()=>{requestAnimationFrame(()=>console.info("Downloading ".concat(o," diagram: '").concat(n,"'"))),S(null);try{if(I("loading"),"png"===o)await t9("".concat(E,".png"),{pixelRatio:d,backgroundColor:f});else if("svg"===o)await t6("".concat(E,".svg"),{backgroundColor:f});else if("pdf"===o)await t3("".concat(E,".pdf"),{backgroundColor:f,pixelRatio:d});else throw Error("unknown image format: ".concat(o));I("loaded"),setTimeout(()=>{I("default")},3e3)}catch(e){I("loaded"),S("An unexpected error occurred"),eI.F.error(e)}},"data-sentry-element":"Button","data-sentry-source-file":"export_tab.tsx",children:[(0,r.jsx)(M.LucideIcon,{icon:"loaded"===k?tA.A:"loading"===k?tB.A:tz.A,"data-sentry-element":"LucideIcon","data-sentry-source-file":"export_tab.tsx"}),"loaded"===k?"Downloaded":"loading"===k?"Downloading":"Download"]})]}),(0,r.jsx)("div",{className:"text-md w-full font-bold",children:"Export diagram text"}),P?(0,r.jsx)(th.m,{className:"w-full whitespace-pre-wrap pb-0",children:(0,r.jsx)(u.H,{className:"max-h-28 overflow-hidden",children:n})}):(0,r.jsx)(th.m,{className:"w-full p-2",children:"Create a diagram to export it"}),(0,r.jsxs)("div",{className:"flex w-full gap-4",children:[(0,r.jsx)(B.CopyTextButton,{buttonProps:{className:"w-full",color:"success",variant:"flat",isDisabled:!P},copyText:n,"data-sentry-element":"CopyTextButton","data-sentry-source-file":"export_tab.tsx"}),(0,r.jsxs)(s.T,{className:"w-full",color:"success",variant:"flat",isDisabled:!P||"default"!==y,onPress:async()=>{requestAnimationFrame(()=>console.info("Downloading text diagram: '".concat(n,"'"))),S(null);try{v("loading"),await tU()(n,"mermaid-flow.txt"),v("loaded"),setTimeout(()=>{v("default")},3e3)}catch(e){eI.F.error(e),v("default"),S("An unexpected error occurred")}},"data-sentry-element":"Button","data-sentry-source-file":"export_tab.tsx",children:[(0,r.jsx)(M.LucideIcon,{icon:"loaded"===y?tA.A:"loading"===y?tB.A:tL.A,"data-sentry-element":"LucideIcon","data-sentry-source-file":"export_tab.tsx"}),"loaded"===y?"Downloaded":"loading"===y?"Downloading":"Download"]})]}),null!=T&&(0,r.jsx)(b._,{classNames:{pre:"whitespace-pre-wrap"},hideCopyButton:!0,hideSymbol:!0,color:"danger",children:T}),(0,r.jsx)(i.y,{className:"invisible","data-sentry-element":"Divider","data-sentry-source-file":"export_tab.tsx"})]})},order:5}};function ah(){return af(0)}function ap(){return af(Object.values(ag).length-1)}function ax(e){return Object.values(ag).findIndex(t=>t.name===e)}function af(e){return Object.values(ag)[e]}function ay(e){let{top:t,bottom:a}=e;return ag[t].order>ag[a].order?{top:a,bottom:t}:{top:t,bottom:a}}function ab(e){let{tierKey:t,session:a,PricingPage:n}=e,s=(0,j.D)(),i=(0,am.lW)(),l=(e=>{let{width:t}=e;return t<1024})(null==s?i:s),[o,c]=(0,N.useState)(!1),[d,u]=(0,N.useState)(!1),m=(0,N.useMemo)(()=>[{key:"Meta",metaKey:!0,ctrlKey:!1},{key:"Control",metaKey:!1,ctrlKey:!0}],[]),{pressed:g}=(0,D.d)({keys:m}),h=(0,N.useMemo)(()=>[{key:" ",metaKey:!1,ctrlKey:!1}],[]),{pressed:p}=(0,D.d)({keys:h}),{pressed:x}=function(e){let{middleMouse:t}=e,[a,n]=(0,N.useState)(!1),r=(0,N.useCallback)(e=>{1===e.button&&t&&n(!0)},[t]),s=(0,N.useCallback)(e=>{1===e.button&&t&&n(!1)},[t]);return(0,N.useEffect)(()=>(document.addEventListener("mousedown",r),document.addEventListener("mouseup",s),()=>{document.removeEventListener("mousedown",r),document.removeEventListener("mouseup",s)}),[s,r]),{pressed:a}}({middleMouse:!0});return((0,N.useEffect)(()=>{c(!0)},[]),o)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(eb.GT,{smooth:!1,minScale:.1,maxScale:300,zoomAnimation:{disabled:!0},velocityAnimation:{disabled:!0},alignmentAnimation:{disabled:!0},onWheelStart:()=>u(!0),onPanningStart:(e,t)=>{"touchstart"!==t.type&&u(!0)},onPinchingStart:()=>u(!0),onZoomStart:()=>u(!0),onWheelStop:()=>u(!1),onPanningStop:(e,t)=>{"touchend"!==t.type&&u(!1)},onPinchingStop:()=>u(!1),onZoomStop:()=>u(!1),panning:{allowLeftClickPan:p,allowRightClickPan:!1,allowMiddleClickPan:!0,wheelPanning:!g},wheel:{wheelDisabled:!g,step:.1},doubleClick:{disabled:!0},"data-sentry-element":"TransformWrapper","data-sentry-source-file":"editor_client.tsx",children:[!l&&(0,r.jsx)(av,{tierKey:t,session:a,disableShadowContainers:d,middleMousePressed:x,spacePressed:p,metaPressed:g}),l&&(0,r.jsx)(aw,{tierKey:t,session:a,disableShadowContainers:d,middleMousePressed:x,spacePressed:p,metaPressed:g})]}),null!=n&&(0,r.jsx)(ak,{tierKey:t,PricingPage:n})]}):(0,r.jsx)("div",{className:"h-full w-full"})}function av(e){let{session:t,tierKey:a,disableShadowContainers:n,spacePressed:s,middleMousePressed:l,metaPressed:o}=e,c=ey(e=>e.verticalSelectedTabs);return(0,r.jsxs)("div",{className:(0,m.cn)("flex h-full w-full overflow-hidden"),"data-sentry-component":"LargeScreenEditor","data-sentry-source-file":"editor_client.tsx",children:[(0,r.jsx)(tr,{className:"z-20","data-sentry-element":"VerticalToolbar","data-sentry-source-file":"editor_client.tsx"}),(0,r.jsxs)("div",{className:(0,m.cn)("flex h-full w-full"),children:[(0,r.jsxs)("div",{id:"tabs",className:(0,m.cn)("relative z-20 flex h-full max-w-[calc(min(60ch,_40vw))] flex-col justify-between bg-background",{"w-full":"none"!==c.state}),children:[Object.values(ag).map(e=>{let n=e.name;return(0,r.jsx)("div",{id:"none"!==c.state&&c.top===n?"top-tab":void 0,className:(0,m.cn)("w-full",{hidden:"none"===c.state||c.top!==n,"h-full":"single"===c.state&&c.top===n,"h-1/2":"dual"===c.state&&c.top===n}),children:(0,r.jsx)(aj,{tab:e,session:t,tierKey:a})},"large-top-tab-name-".concat(n))}),"dual"===c.state&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.y,{}),(0,r.jsx)("div",{id:"bottom-tab",className:"h-1/2 w-full",children:(0,r.jsx)(aj,{tab:ag[c.bottom],session:t,tierKey:a})})]})]}),(0,r.jsx)("div",{className:"z-20 h-full border border-default"}),(0,r.jsx)("div",{className:"z-0 h-full w-full",children:(0,r.jsx)(e7,{disableShadowContainers:n,className:(0,m.cn)({"cursor-grab":s||l,"cursor-zoom-in":o}),"data-sentry-element":"EditorImage","data-sentry-source-file":"editor_client.tsx"})})]})]})}function aw(e){let{session:t,tierKey:a,disableShadowContainers:n,spacePressed:s,middleMousePressed:i,metaPressed:l}=e,o=ey(e=>e.horizontalSelectedTabs);return(0,r.jsxs)("div",{className:"flex h-full w-full flex-col justify-between overflow-auto","data-sentry-component":"SmallScreenEditor","data-sentry-source-file":"editor_client.tsx",children:[(0,r.jsx)("div",{className:(0,m.cn)("z-0",{"h-full":"none"===o.state,"h-1/2":"none"!==o.state}),children:(0,r.jsx)(e7,{disableShadowContainers:n,className:(0,m.cn)({"cursor-grab":s||i,"cursor-zoom-in":l}),"data-sentry-element":"EditorImage","data-sentry-source-file":"editor_client.tsx"})}),Object.values(ag).map(e=>{let{name:n}=e;return(0,r.jsx)("div",{className:(0,m.cn)("z-20 h-1/2 overflow-auto border-t border-default bg-background",{hidden:"none"===o.state||o.top!==n}),children:(0,r.jsx)(aj,{tab:ag[n],session:t,tierKey:a})},"tab-name-".concat(n))}),(0,r.jsx)(tl,{className:"z-20","data-sentry-element":"HorizontalToolbar","data-sentry-source-file":"editor_client.tsx"})]})}function aj(e){let{tab:t,session:a,tierKey:n}=e;return(0,r.jsx)(u.H,{className:"h-full","data-sentry-element":"ScrollShadow","data-sentry-component":"TabComponent","data-sentry-source-file":"editor_client.tsx",children:(0,r.jsx)(w,{"data-sentry-element":"UnknownErrorBoundary","data-sentry-source-file":"editor_client.tsx",children:(0,r.jsx)(T,{"data-sentry-element":"SuspenseSpinner","data-sentry-source-file":"editor_client.tsx",children:(0,r.jsx)(t.Component,{session:a,tierKey:n,"data-sentry-element":"tab.Component","data-sentry-source-file":"editor_client.tsx"})})})})}function ak(e){let{tierKey:t,PricingPage:a}=e,{isOpen:n,onOpenChange:s}=(0,l.j)({defaultOpen:"free"===t});return"true"===ac.s.get("pricingModalDismissed")||"true"===ac.s.get("commercialUseDeclaration")?(0,r.jsx)(r.Fragment,{}):(0,r.jsx)(o.Y,{isOpen:n,scrollBehavior:"inside",onOpenChange:s,classNames:{base:"max-w-none max-h-none w-full sm:w-[95dvw] h-[95dvh] !my-0 border-1 border-success p-0 bg-background",wrapper:"overflow-hidden"},"data-sentry-element":"Modal","data-sentry-component":"EditorModal","data-sentry-source-file":"editor_client.tsx",children:(0,r.jsx)(c.g,{"data-sentry-element":"ModalContent","data-sentry-source-file":"editor_client.tsx",children:(0,r.jsx)(d.h,{"data-sentry-element":"ModalBody","data-sentry-source-file":"editor_client.tsx",children:a})})})}function aI(e){var t,a;let{children:n}=e,s=(0,au.useSearchParams)(),i=(0,au.useRouter)(),l=(0,au.usePathname)(),o=null!=(a=(null!=(t=s.get(C._))?t:"").startsWith(C.K))&&a,c=(0,g.a)(),d=(0,am.lW)();return c||d.width<1200?(o&&window.open(window.origin+"/editor","_ blank"),n[0]):(0,r.jsxs)(j.v,{windowSize:d,show:o?"both":"first",showWhenWindowIsTooShort:"first",orientation:"horizontal",firstPane:{minLength:700,className:"isolate z-10"},secondPane:{minLength:500,className:"isolate z-0"},initialOffset:{pane:"second",length:400},"data-sentry-element":"SplitPane","data-sentry-component":"EditorDocsSplitPane","data-sentry-source-file":"editor_client.tsx",children:[(0,r.jsxs)("div",{className:"relative flex h-full w-full items-stretch justify-between",children:[n[0],(0,r.jsx)(aN,{showDocs:o,setShowDocs:e=>{if(e){let e=new URLSearchParams(s.toString());e.delete(C._),i.push("".concat(l,"?").concat(e.toString()).concat(e.values.length>0?"&":"").concat(C._,"=").concat(C.K))}else{let e=new URLSearchParams(s.toString());e.delete(C._),i.push("".concat(l,"?").concat(e.toString()))}},"data-sentry-element":"SplitPaneBar","data-sentry-source-file":"editor_client.tsx"})]}),n[1]]})}function aN(e){let{showDocs:t,setShowDocs:a}=e;return(0,r.jsx)("div",{className:(0,m.cn)("absolute right-0 top-0 z-50 flex h-dvh justify-center"),"data-sentry-component":"SplitPaneBar","data-sentry-source-file":"editor_client.tsx",children:(0,r.jsxs)(s.T,{size:"md",color:t?"primary":"default",variant:"shadow",radius:"none",className:(0,m.cn)("h-24 min-h-0 min-w-0 rounded-bl-lg px-2 text-foreground vertical-writing-rl"),onPress:()=>a(!t),"data-sentry-element":"Button","data-sentry-source-file":"editor_client.tsx",children:[(0,r.jsx)(ad.A,{size:12,"data-sentry-element":"PencilIcon","data-sentry-source-file":"editor_client.tsx"})," Docs"]})})}},33800:(e,t,a)=>{a.d(t,{AuthLockedContent:()=>i});var n=a(95155),r=a(38398),s=a(12115);function i(e){let{children:t,className:a,tierKey:i,session:l,showLock:o=!1,AuthLockedContent:c,PremiumLockedContent:d}=e,[u,m]=(0,s.useState)(!1),g=(null==l?void 0:l.user)==null?c:d,h=(null==l?void 0:l.user)==null||"free"===i&&null!=d;return o&&!u&&m(!0),(0,n.jsxs)("div",{className:(0,r.cn)(a,{"pointer-events-none relative overflow-clip":h}),"data-sentry-component":"AuthLockedContent","data-sentry-source-file":"locked_premium_content.tsx",children:[h&&(0,n.jsx)("div",{role:u?void 0:"button",onClick:()=>{m(!0)},onWheel:()=>{m(!0)},onTouchStart:()=>{m(!0)},className:(0,r.cn)("pointer-events-auto absolute z-20 flex h-full w-full flex-col items-center justify-center gap-6 backdrop-blur-lg",{"opacity-0":!u}),children:g}),t]})}},39544:(e,t,a)=>{a.d(t,{bj:()=>n,gr:()=>r});let n=140,r=70},60131:(e,t,a)=>{a.d(t,{Eh:()=>r,Qw:()=>s,TA:()=>l,r9:()=>i});var n=a(37485);async function r(e){try{return await n.A.parse(e),!0}catch(e){return!1}}function s(e){return e.endsWith("\n	")||e.endsWith("\n    ")?"":e.endsWith("\n")?"	":"\n	"}function i(e){return"".concat(Math.floor(9*Math.random()+1)).concat(Math.random().toString().slice(2,e+1))}function l(e,t){var a,n,r,s,i,l;let o=t.firstLine-1,c=t.lastLine-1,d=e.split("\n");return{startIndex:d.slice(0,o).reduce((e,t)=>e+t.length+1,0)+(null!=(i=null==(n=d[o])||null==(a=n.substring(0,t.firstColumn))?void 0:a.length)?i:0),endIndex:d.slice(0,c).reduce((e,t)=>e+t.length+1,0)+(null!=(l=null==(s=d[c])||null==(r=s.substring(0,t.lastColumn))?void 0:r.length)?l:0)}}},78373:(e,t,a)=>{a.d(t,{_6:()=>en,jv:()=>ea,nq:()=>ee});var n=a(95155),r=a(38757),s=a(88200),i=a(39544);let l={src:"/_next/static/media/bolt.1271890a.svg",height:86,width:51},o={src:"/_next/static/media/bow-rect.69152dfd.svg",height:55,width:188},c={src:"/_next/static/media/brace-r.87cd05d0.svg",height:65,width:165},d={src:"/_next/static/media/brace.3fbf46c3.svg",height:65,width:160},u={src:"/_next/static/media/braces.25568e47.svg",height:65,width:132},m={src:"/_next/static/media/circle.59ec9f8c.svg",height:73,width:73},g={src:"/_next/static/media/cross-circ.4ab5a6b3.svg",height:76,width:76},h={src:"/_next/static/media/curv-trap.3478b247.svg",height:70,width:208},p={src:"/_next/static/media/cyl.d0dd1113.svg",height:83,width:90},x={src:"/_next/static/media/dbl-circ.5b3f999c.svg",height:137,width:137},f={src:"/_next/static/media/delay.b19e9268.svg",height:70,width:218},y={src:"/_next/static/media/diam.12b48bef.svg",height:132,width:132},b={src:"/_next/static/media/div-rect.fe21a4bf.svg",height:63,width:159},v={src:"/_next/static/media/doc.4d5a646a.svg",height:83,width:118},w={src:"/_next/static/media/docs.4f0be4f6.svg",height:107,width:189},j={src:"/_next/static/media/f-circ.ff3ac91f.svg",height:30,width:30},k={src:"/_next/static/media/flag.a4779844.svg",height:113,width:116},I={src:"/_next/static/media/flip-tri.afb88a45.svg",height:170,width:170},N={src:"/_next/static/media/fork.215812e5.svg",height:26,width:86},T={src:"/_next/static/media/fr-circ.c65378ff.svg",height:30,width:30},S={src:"/_next/static/media/fr-rect.633e9cba.svg",height:55,width:176},D={src:"/_next/static/media/h-cyl.1359eb15.svg",height:48,width:177},C={src:"/_next/static/media/hex.6b760018.svg",height:55,width:111},P={src:"/_next/static/media/hourglass.c9c40016.svg",height:46,width:46},_={src:"/_next/static/media/lean-l.62e261fd.svg",height:55,width:138},E={src:"/_next/static/media/lean-r.36645a32.svg",height:55,width:146},A={src:"/_next/static/media/lin-cyl.a7f99157.svg",height:91,width:134},L={src:"/_next/static/media/lin-doc.acc63519.svg",height:97,width:177},R={src:"/_next/static/media/lin-rect.2618d553.svg",height:70,width:176},z={src:"/_next/static/media/notch-pent.32dcac06.svg",height:70,width:199},B={src:"/_next/static/media/notch-rect.1c7ede59.svg",height:55,width:178},M={src:"/_next/static/media/odd.0ae4d50e.svg",height:55,width:69},O={src:"/_next/static/media/rect.19b5a6d0.svg",height:70,width:146},F={src:"/_next/static/media/rounded.d2ccecad.svg",height:70,width:182},H={src:"/_next/static/media/sl-rect.a0967588.svg",height:97,width:169},V={src:"/_next/static/media/sm-circ.4eba03d4.svg",height:30,width:30},W={src:"/_next/static/media/st-rect.f6e1d171.svg",height:80,width:187},K={src:"/_next/static/media/stadium.9d810a04.svg",height:55,width:99},Y={src:"/_next/static/media/tag-doc.8ecde119.svg",height:97,width:188},Z={src:"/_next/static/media/tag-rect.657cba80.svg",height:70,width:181},U={src:"/_next/static/media/text.5143d137.svg",height:55,width:105},q={src:"/_next/static/media/trap-b.1ccdd8d5.svg",height:55,width:196},$={src:"/_next/static/media/trap-t.806d0bd0.svg",height:70,width:199},G={src:"/_next/static/media/tri.ce66b56f.svg",height:112,width:112},X={src:"/_next/static/media/win-pane.d3c1e258.svg",height:75,width:146};var Q=a(47124),J=a(20556);let ee={rect:{semanticName:"Process",name:"Rectangle",shortName:"rect",description:"Standard process shape",aliases:["proc","process","rectangle"],Icon:(0,n.jsx)(r._,{src:O.src,alt:"Rectangle button",...(0,s.Z0)({width:O.width,height:O.height,targetWidth:i.bj,targetHeight:i.gr})}),showName:!0},circle:{semanticName:"Start",name:"Circle",shortName:"circle",description:"Starting point",aliases:["circ"],Icon:(0,n.jsx)(r._,{src:m.src,...(0,s.Z0)({width:m.width,height:m.height,targetWidth:i.bj,targetHeight:i.gr}),alt:"Circle button"}),showName:!0},tri:{semanticName:"Extract",name:"Triangle",shortName:"tri",description:"Extraction process",aliases:["extract","triangle"],Icon:(0,n.jsx)(r._,{src:G.src,...(0,s.Z0)({width:G.width,height:G.height,targetWidth:i.bj,targetHeight:i.gr}),alt:"Triangle button"}),showName:!0},diam:{semanticName:"Decision",name:"Diamond",shortName:"diam",description:"Decision-making step",aliases:["decision","diamond","question"],Icon:(0,n.jsx)(r._,{src:y.src,...(0,s.Z0)({width:y.width,height:y.height,targetWidth:i.bj,targetHeight:i.gr}),alt:"Diamond button"}),showName:!0},hex:{semanticName:"Prepare Conditional",name:"Hexagon",shortName:"hex",description:"Preparation or condition step",aliases:["hexagon","prepare"],Icon:(0,n.jsx)(r._,{src:C.src,...(0,s.Z0)({width:C.width,height:C.height,targetWidth:i.bj,targetHeight:i.gr}),alt:"Hexagon button"}),showName:!0},rounded:{semanticName:"Event",name:"Rounded Rectangle",shortName:"rounded",description:"Represents an event",aliases:["event"],Icon:(0,n.jsx)(r._,{src:F.src,...(0,s.Z0)({width:F.width,height:F.height,targetWidth:i.bj,targetHeight:i.gr}),alt:"Hexagon button"}),showName:!0},stadium:{semanticName:"Terminal Point",name:"Stadium",shortName:"stadium",description:"Terminal point",aliases:["terminal","pill"],Icon:(0,n.jsx)(r._,{src:K.src,...(0,s.Z0)({width:K.width,height:K.height,targetWidth:i.bj,targetHeight:i.gr}),alt:"Stadium button"}),showName:!0},"fr-rect":{semanticName:"Subprocess",name:"Framed Rectangle",shortName:"fr-rect",description:"Subprocess",aliases:["subprocess","subproc","framed-rectangle","subroutine"],Icon:(0,n.jsx)(r._,{src:S.src,...(0,s.Z0)({width:S.width,height:S.height,targetWidth:i.bj,targetHeight:i.gr}),alt:"Framed Rectangle button"}),showName:!0},cyl:{semanticName:"Database",name:"Cylinder",shortName:"cyl",description:"Database storage",aliases:["db","database","cylinder"],Icon:(0,n.jsx)(r._,{src:p.src,...(0,s.Z0)({width:p.width,height:p.height,targetWidth:i.bj,targetHeight:i.gr}),alt:"Cylinder button"}),showName:!0},"lean-r":{semanticName:"Data Input/Output",name:"Lean Right",shortName:"lean-r",description:"Represents input or output",aliases:["lean-right","in-out"],Icon:(0,n.jsx)(r._,{src:E.src,...(0,s.Z0)({width:E.width,height:E.height,targetWidth:i.bj,targetHeight:i.gr}),alt:"Lean Right button"}),showName:!0},"lean-l":{semanticName:"Data Input/Output",name:"Lean Left",shortName:"lean-l",description:"Represents output or input",aliases:["lean-left","out-in"],Icon:(0,n.jsx)(r._,{src:_.src,...(0,s.Z0)({width:_.width,height:_.height,targetWidth:i.bj,targetHeight:i.gr}),alt:"Lean Left button"}),showName:!0},"trap-b":{semanticName:"Priority Action",name:"Trapezoid Bottom",shortName:"trap-b",description:"Priority action",aliases:["priority","trapezoid-bottom","trapezoid"],Icon:(0,n.jsx)(r._,{src:q.src,...(0,s.Z0)({width:q.width,height:q.height,targetWidth:i.bj,targetHeight:i.gr}),alt:"Trapezoid Bottom button"}),showName:!0},"trap-t":{semanticName:"Manual Operation",name:"Trapezoid Top",shortName:"trap-t",description:"Represents a manual task",aliases:["manual","trapezoid-top","inv-trapezoid"],Icon:(0,n.jsx)(r._,{src:$.src,...(0,s.Z0)({width:$.width,height:$.height,targetWidth:i.bj,targetHeight:i.gr}),alt:"Trapezoid Top button"}),showName:!0},"dbl-circ":{semanticName:"Stop",name:"Double Circle",shortName:"dbl-circ",description:"Represents a stop point",aliases:["double-circle"],Icon:(0,n.jsx)(r._,{src:x.src,...(0,s.Z0)({width:x.width,height:x.height,targetWidth:i.bj,targetHeight:i.gr}),alt:"Double Circle button"}),showName:!0},"notch-rect":{semanticName:"Card",name:"Notched Rectangle",shortName:"notch-rect",description:"Represents a card",aliases:["card","notched-rectangle"],Icon:(0,n.jsx)(r._,{src:B.src,...(0,s.Z0)({width:B.width,height:B.height,targetWidth:i.bj,targetHeight:i.gr}),alt:"Notched Rectangle button"}),showName:!0},"lin-rect":{semanticName:"Lined/Shaded Process",name:"Lined Rectangle",shortName:"lin-rect",description:"Lined process shape",aliases:["lined-rectangle","lined-process","lin-proc","shaded-process"],Icon:(0,n.jsx)(r._,{src:R.src,...(0,s.Z0)({width:R.width,height:R.height,targetWidth:i.bj,targetHeight:i.gr}),alt:"Lined Rectangle button"}),showName:!0},braces:{semanticName:"Comment with braces on both sides",name:"Curly Braces",shortName:"braces",description:"Adds a comment",aliases:[],Icon:(0,n.jsx)(r._,{src:u.src,...(0,s.Z0)({width:u.width,height:u.height,targetWidth:i.bj,targetHeight:i.gr}),className:"bg-foreground",alt:"Curly Braces button"}),showName:!0},brace:{semanticName:"Comment",name:"Curly Left Brace",shortName:"brace",description:"Adds a comment",aliases:["comment","brace-l"],Icon:(0,n.jsx)(r._,{src:d.src,...(0,s.Z0)({width:d.width,height:d.height,targetWidth:i.bj,targetHeight:i.gr}),className:"bg-foreground",alt:"Curly Left Brace button"}),showName:!0},"brace-r":{semanticName:"Comment Right",name:"Curly Right Brace",shortName:"brace-r",description:"Adds a comment",aliases:[],Icon:(0,n.jsx)(r._,{src:c.src,...(0,s.Z0)({width:c.width,height:c.height,targetWidth:i.bj,targetHeight:i.gr}),className:"bg-foreground",alt:"Curly Left Brace button"}),showName:!0},text:{semanticName:"Text Block",name:"Text Block",shortName:"text",description:"Text block",aliases:[],Icon:(0,n.jsx)(r._,{className:"bg-foreground",src:U.src,...(0,s.Z0)({width:U.width,height:U.height,targetWidth:i.bj,targetHeight:i.gr}),alt:"Text Block button"}),showName:!0},doc:{semanticName:"Document",name:"Document",shortName:"doc",description:"Represents a document",aliases:["doc","document"],Icon:(0,n.jsx)(r._,{src:v.src,...(0,s.Z0)({width:v.width,height:v.height,targetWidth:i.bj,targetHeight:i.gr}),alt:"Document button"}),showName:!0},delay:{semanticName:"Delay",name:"Half-Rounded Rectangle",shortName:"delay",description:"Represents a delay",aliases:["half-rounded-rectangle"],Icon:(0,n.jsx)(r._,{src:f.src,...(0,s.Z0)({width:f.width,height:f.height,targetWidth:i.bj,targetHeight:i.gr}),alt:"Half-Rounded Rectangle button"}),showName:!0},"h-cyl":{semanticName:"Direct Access Storage",name:"Horizontal Cylinder",shortName:"h-cyl",description:"Direct access storage",aliases:["das","horizontal-cylinder"],Icon:(0,n.jsx)(r._,{src:D.src,...(0,s.Z0)({width:D.width,height:D.height,targetWidth:i.bj,targetHeight:i.gr}),alt:"Horizontal Cylinder button"}),showName:!0},"lin-cyl":{semanticName:"Disk Storage",name:"Lined Cylinder",shortName:"lin-cyl",description:"Disk storage",aliases:["disk","lined-cylinder"],Icon:(0,n.jsx)(r._,{src:A.src,...(0,s.Z0)({width:A.width,height:A.height,targetWidth:i.bj,targetHeight:i.gr}),alt:"Lined Cylinder button"}),showName:!0},"curv-trap":{semanticName:"Display",name:"Curved Trapezoid",shortName:"curv-trap",description:"Represents a display",aliases:["curved-trapezoid","display"],Icon:(0,n.jsx)(r._,{src:h.src,...(0,s.Z0)({width:h.width,height:h.height,targetWidth:i.bj,targetHeight:i.gr}),alt:"Curved Trapezoid button"}),showName:!0},"div-rect":{semanticName:"Divided Process",name:"Divided Rectangle",shortName:"div-rect",description:"Divided process shape",aliases:["div-proc","divided-rectangle","divided-process"],Icon:(0,n.jsx)(r._,{src:b.src,...(0,s.Z0)({width:b.width,height:b.height,targetWidth:i.bj,targetHeight:i.gr}),alt:"Divided Rectangle button"}),showName:!0},"win-pane":{semanticName:"Internal Storage",name:"Window Pane",shortName:"win-pane",description:"Internal storage",aliases:["internal-storage","window-pane"],Icon:(0,n.jsx)(r._,{src:X.src,...(0,s.Z0)({width:X.width,height:X.height,targetWidth:i.bj,targetHeight:i.gr}),alt:"Window Pane button"}),showName:!0},"notch-pent":{semanticName:"Loop Limit",name:"Trapezoidal Pentagon",shortName:"notch-pent",description:"Loop limit step",aliases:["loop-limit","notched-pentagon"],Icon:(0,n.jsx)(r._,{src:z.src,...(0,s.Z0)({width:z.width,height:z.height,targetWidth:i.bj,targetHeight:i.gr}),alt:"Trapezoidal Pentagon button"}),showName:!0},"flip-tri":{semanticName:"Manual File",name:"Flipped Triangle",shortName:"flip-tri",description:"Manual file operation",aliases:["manual-file","flipped-triangle"],Icon:(0,n.jsx)(r._,{src:I.src,...(0,s.Z0)({width:I.width,height:I.height,targetWidth:i.bj,targetHeight:i.gr}),alt:"Trapezoidal Pentagon button"}),showName:!0},"sl-rect":{semanticName:"Manual Input",name:"Sloped Rectangle",shortName:"sl-rect",description:"Manual input step",aliases:["manual-input","sloped-rectangle"],Icon:(0,n.jsx)(r._,{src:H.src,...(0,s.Z0)({width:H.width,height:H.height,targetWidth:i.bj,targetHeight:i.gr}),alt:"Sloped Rectangle button"}),showName:!0},docs:{semanticName:"Multi-Document",name:"Stacked Document",shortName:"docs",description:"Multiple documents",aliases:["documents","st-doc","stacked-document"],Icon:(0,n.jsx)(r._,{src:w.src,...(0,s.Z0)({width:w.width,height:w.height,targetWidth:i.bj,targetHeight:i.gr}),alt:"Stacked Document button"}),showName:!0},"st-rect":{semanticName:"Multi-Process",name:"Stacked Rectangle",shortName:"st-rect",description:"Multiple processes",aliases:["procs","processes","stacked-rectangle"],Icon:(0,n.jsx)(r._,{src:W.src,...(0,s.Z0)({width:W.width,height:W.height,targetWidth:i.bj,targetHeight:i.gr}),alt:"Stacked Rectangle button"}),showName:!0},"bow-rect":{semanticName:"Stored Data",name:"Bow Tie Rectangle",shortName:"bow-rect",description:"Stored data",aliases:["stored-data","bow-tie-rectangle"],Icon:(0,n.jsx)(r._,{src:o.src,...(0,s.Z0)({width:o.width,height:o.height,targetWidth:i.bj,targetHeight:i.gr}),alt:"Bow Tie Rectangle button"}),showName:!0},"tag-doc":{semanticName:"Tagged Document",name:"Tagged Document",shortName:"tag-doc",description:"Tagged document",aliases:["tag-doc","tagged-document"],Icon:(0,n.jsx)(r._,{src:Y.src,...(0,s.Z0)({width:Y.width,height:Y.height,targetWidth:i.bj,targetHeight:i.gr}),alt:"Tagged Document button"}),showName:!0},"tag-rect":{semanticName:"Tagged Process",name:"Tagged Rectangle",shortName:"tag-rect",description:"Tagged process",aliases:["tagged-rectangle","tag-proc","tagged-process"],Icon:(0,n.jsx)(r._,{src:Z.src,...(0,s.Z0)({width:Z.width,height:Z.height,targetWidth:i.bj,targetHeight:i.gr}),alt:"Tagged Rectangle button"}),showName:!0},flag:{semanticName:"Paper Tape",name:"Flag",shortName:"flag",description:"Paper tape",aliases:["paper-tape"],Icon:(0,n.jsx)(r._,{src:k.src,...(0,s.Z0)({width:k.width,height:k.height,targetWidth:i.bj,targetHeight:i.gr}),alt:"Flag button"}),showName:!0},odd:{semanticName:"Odd",name:"Odd",shortName:"odd",description:"Odd shape",aliases:[],Icon:(0,n.jsx)(r._,{src:M.src,...(0,s.Z0)({width:M.width,height:M.height,targetWidth:i.bj,targetHeight:i.gr}),alt:"Odd button"}),showName:!0},"lin-doc":{semanticName:"Lined Document",name:"Lined Document",shortName:"lin-doc",description:"Lined document",aliases:["lined-document"],Icon:(0,n.jsx)(r._,{src:L.src,...(0,s.Z0)({width:L.width,height:L.height,targetWidth:i.bj,targetHeight:i.gr}),alt:"Lined Document button"}),showName:!0},"sm-circ":{semanticName:"Start",name:"Small Circle",shortName:"sm-circ",description:"Small starting point",aliases:["start","small-circle"],Icon:(0,n.jsx)(r._,{src:V.src,...(0,s.Z0)({width:V.width,height:V.height,targetWidth:i.bj,targetHeight:i.gr}),alt:"Small Circle button"}),showName:!1},"f-circ":{semanticName:"Junction",name:"Filled Circle",shortName:"f-circ",description:"Junction point",aliases:["junction","filled-circle"],Icon:(0,n.jsx)(r._,{src:j.src,...(0,s.Z0)({width:j.width,height:j.height,targetWidth:i.bj,targetHeight:i.gr}),alt:"Filled Circle button"}),showName:!1},"fr-circ":{semanticName:"Stop",name:"Framed Circle",shortName:"fr-circ",description:"Stop point",aliases:["stop","framed-circle"],Icon:(0,n.jsx)(r._,{src:T.src,...(0,s.Z0)({width:T.width,height:T.height,targetWidth:i.bj,targetHeight:i.gr}),alt:"Framed Circle button"}),showName:!1},fork:{semanticName:"Fork/Join",name:"Filled Rectangle",shortName:"fork",description:"Fork or join in process flow",aliases:["join"],Icon:(0,n.jsx)(r._,{src:N.src,...(0,s.Z0)({width:N.width,height:N.height,targetWidth:i.bj,targetHeight:i.gr}),alt:"Filled Rectangle button"}),showName:!1},hourglass:{semanticName:"Collate",name:"Hourglass",shortName:"hourglass",description:"Represents a collate operation",aliases:["hourglass","collate"],Icon:(0,n.jsx)(r._,{src:P.src,...(0,s.Z0)({width:P.width,height:P.height,targetWidth:i.bj,targetHeight:i.gr}),alt:"Hourglass button"}),showName:!1},bolt:{semanticName:"Com Link",name:"Lightning Bolt",shortName:"bolt",description:"Communication link",aliases:["com-link","lightning-bolt"],Icon:(0,n.jsx)(r._,{src:l.src,...(0,s.Z0)({width:l.width,height:l.height,targetWidth:i.bj,targetHeight:i.gr}),alt:"Lightning Bolt button"}),showName:!1},"cross-circ":{semanticName:"Summary",name:"Crossed Circle",shortName:"cross-circ",description:"Represents a summary",aliases:["summary","crossed-circle"],Icon:(0,n.jsx)(r._,{src:g.src,...(0,s.Z0)({width:g.width,height:g.height,targetWidth:i.bj,targetHeight:i.gr}),alt:"Crossed Circle button"}),showName:!1}},et=Object.values(ee),ea=function(e){let t=e.map(e=>J.eu(e));return J.KC(t)}(et.flatMap(e=>[e.shortName,...e.aliases]));function en(e){let t=et.find(t=>t.shortName===e||t.aliases.includes(e));return null==t?(Q.F.error("Shape is null",e,ee),ee.rect):t}},79368:(e,t,a)=>{a.d(t,{M9:()=>i,d$:()=>r,e9:()=>l,eO:()=>s});var n=a(20556);let r={flowchart:{name:"Flowchart",type:"flowchart",initialDiagramText:"flowchart\n	",sampleDiagramText:"flowchart TD\n    A[Christmas] --\x3e|Get money| B(Go shopping)\n    B --\x3e C{Let me think}\n    C --\x3e|One| D[Laptop]\n    C --\x3e|Two| E[iPhone]\n    C --\x3e|Three| F[fa:fa-car Car]\n"},sequence:{name:"Sequence",type:"sequence",initialDiagramText:"sequenceDiagram\n	",sampleDiagramText:"sequenceDiagram\n    Alice->>+John: Hello John, how are you?\n    Alice->>+John: John, can you hear me?\n    John--\x3e>-Alice: Hi Alice, I can hear you!\n    John--\x3e>-Alice: I feel great!\n"},class:{name:"Class",type:"class",initialDiagramText:"classDiagram\n	Class",sampleDiagramText:"classDiagram\n    Animal <|-- Duck\n    Animal <|-- Fish\n    Animal <|-- Zebra\n    Animal : +int age\n    Animal : +String gender\n    Animal: +isMammal()\n    Animal: +mate()\n    class Duck{\n        +String beakColor\n        +swim()\n        +quack()\n    }\n    class Fish{\n        -int sizeInFeet\n        -canEat()\n    }\n    class Zebra{\n        +bool is_wild\n        +run()\n    }\n"},state:{name:"State",type:"state",initialDiagramText:"stateDiagram-v2\n	",sampleDiagramText:"stateDiagram-v2\n    [*] --\x3e Still\n    Still --\x3e [*]\n    Still --\x3e Moving\n    Moving --\x3e Still\n    Moving --\x3e Crash\n    Crash --\x3e [*]\n"},er:{name:"Entity Relationship",type:"er",initialDiagramText:"erDiagram\n	",sampleDiagramText:'erDiagram\n    CUSTOMER }|..|{ DELIVERY-ADDRESS : has\n    CUSTOMER ||--o{ ORDER : places\n    CUSTOMER ||--o{ INVOICE : "liable for"\n    DELIVERY-ADDRESS ||--o{ ORDER : receives\n    INVOICE ||--|{ ORDER : covers\n    ORDER ||--|{ ORDER-ITEM : includes\n    PRODUCT-CATEGORY ||--|{ PRODUCT : contains\n    PRODUCT ||--o{ ORDER-ITEM : "ordered in"\n'},gantt:{name:"Gantt Chart",type:"gantt",initialDiagramText:"gantt\n	",sampleDiagramText:"gantt\n    title A Gantt Diagram\n    dateFormat  YYYY-MM-DD\n    section Section\n    A task :a1, 2014-01-01, 30d\n    Another task :after a1, 20d\n    section Another\n    Task in sec :2014-01-12, 12d\n    another task :24d\n"},journey:{name:"User Journey",type:"journey",initialDiagramText:"journey\n	",sampleDiagramText:"journey\n    title My working day\n    section Go to work\n        Make tea: 5: Me\n        Go upstairs: 3: Me\n        Do work: 1: Me, Cat\n    section Go home\n        Go downstairs: 5: Me\n        Sit down: 3: Me\n"},git:{name:"Git Graph",type:"git",initialDiagramText:"gitGraph\n	",sampleDiagramText:"gitGraph\n    commit\n    commit\n    branch develop\n    checkout develop\n    commit\n    commit\n    checkout main\n    merge develop\n    commit\n    commit\n"},pie:{name:"Pie",type:"pie",initialDiagramText:"pie\n	",sampleDiagramText:'pie title Pets adopted by volunteers\n    "Dogs" : 386\n    "Cats" : 85\n    "Rats" : 15\n'},mindmap:{name:"Mindmap",type:"mindmap",initialDiagramText:"mindmap\n	",sampleDiagramText:"mindmap\n    root((mindmap))\n        Origins\n            Long history\n            ::icon(fa fa-book)\n            Popularisation\n                British popular psychology author Tony Buzan\n      Research\n          On effectiveness<br/>and features\n          On Automatic creation\n              Uses\n                  Creative techniques\n                  Strategic planning\n                  Argument mapping\n      Tools\n          Pen and paper\n          Mermaid\n"},quadrant:{name:"Quadrant Chart",type:"quadrant",initialDiagramText:"quadrantChart\n	",sampleDiagramText:"quadrantChart\n    title Reach and engagement of campaigns\n    x-axis Low Reach --\x3e High Reach\n    y-axis Low Engagement --\x3e High Engagement\n    quadrant-1 We should expand\n    quadrant-2 Need to promote\n    quadrant-3 Re-evaluate\n    quadrant-4 May be improved\n    Campaign A: [0.3, 0.6]\n    Campaign B: [0.45, 0.23]\n    Campaign C: [0.57, 0.69]\n    Campaign D: [0.78, 0.34]\n    Campaign E: [0.40, 0.34]\n    Campaign F: [0.35, 0.78]\n"},xyChart:{name:"XY Chart",type:"xyChart",initialDiagramText:"xychart-beta\n	",sampleDiagramText:'xychart-beta\n    title "Sales Revenue"\n    x-axis [jan, feb, mar, apr, may, jun, jul, aug, sep, oct, nov, dec]\n    y-axis "Revenue (in $)" 4000 --\x3e 11000\n    bar [5000, 6000, 7500, 8200, 9500, 10500, 11000, 10200, 9200, 8500, 7000, 6000]\n    line [5000, 6000, 7500, 8200, 9500, 10500, 11000, 10200, 9200, 8500, 7000, 6000]\n'},block:{name:"Block",type:"block",initialDiagramText:"block-beta\n	columns 1",sampleDiagramText:'block-beta\n    columns 3\n    doc>"Document"]:3\n    space down1<[" "]>(down) space\n\n    block:e:3\n        l["left"]\n        m("A wide one in the middle")\n        r["right"]\n    end\n\n    space down2<[" "]>(down) space\n    db[("DB")]:3\n    space:3\n    D space C\n    db --\x3e D\n    C --\x3e db\n    D --\x3e C\n    style m fill:#d6d,stroke:#333,stroke-width:4px\n'},zenuml:{name:"ZenUML",type:"zenuml",initialDiagramText:"zenuml\n	",sampleDiagramText:"zenuml\n    title Order Service\n    @Actor Client #FFEBE6\n    @Boundary OrderController #0747A6\n    @EC2 <<BFF>> OrderService #E3FCEF\n    group BusinessService {\n        @Lambda PurchaseService\n        @AzureFunction InvoiceService\n    }\n\n    @Starter(Client)\n    // `POST /orders`\n    OrderController.post(payload) {\n        OrderService.create(payload) {\n            order = new Order(payload)\n            if(order != null) {\n                par {\n                    PurchaseService.createPO(order)\n                    InvoiceService.createInvoice(order)\n                }\n            }\n        }\n    }\n"},requirement:{name:"Requirement",type:"requirement",initialDiagramText:"requirementDiagram\n	",sampleDiagramText:"requirementDiagram\n    requirement test_req {\n        id: 1\n        text: the test text.\n        risk: high\n        verifymethod: test\n    }\n\n    element test_entity {\n        type: simulation\n    }\n\n    test_entity - satisfies -> test_req\n"},c4:{name:"C4",type:"c4",initialDiagramText:"C4Context\n	title Title",sampleDiagramText:'C4Context\n    title System Context diagram for Internet Banking System\n    Enterprise_Boundary(b0, "BankBoundary0") {\n        Person(customerA, "Banking Customer A", "A customer of the bank, with personal bank accounts.")\n        Person(customerB, "Banking Customer B")\n        Person_Ext(customerC, "Banking Customer C", "desc")\n\n        Person(customerD, "Banking Customer D", "A customer of the bank, <br/> with personal bank accounts.")\n\n        System(SystemAA, "Internet Banking System", "Allows customers to view information about their bank accounts, and make payments.")\n\n        Enterprise_Boundary(b1, "BankBoundary") {\n            SystemDb_Ext(SystemE, "Mainframe Banking System", "Stores all of the core banking information about customers, accounts, transactions, etc.")\n\n            System_Boundary(b2, "BankBoundary2") {\n                System(SystemA, "Banking System A")\n                System(SystemB, "Banking System B", "A system of the bank, with personal bank accounts. next line.")\n            }\n\n            System_Ext(SystemC, "E-mail system", "The internal Microsoft Exchange e-mail system.")\n            SystemDb(SystemD, "Banking System D Database", "A system of the bank, with personal bank accounts.")\n\n            Boundary(b3, "BankBoundary3", "boundary") {\n                SystemQueue(SystemF, "Banking System F Queue", "A system of the bank.")\n                SystemQueue_Ext(SystemG, "Banking System G Queue", "A system of the bank, with personal bank accounts.")\n            }\n        }\n    }\n\n    BiRel(customerA, SystemAA, "Uses")\n    BiRel(SystemAA, SystemE, "Uses")\n    Rel(SystemAA, SystemC, "Sends e-mails", "SMTP")\n    Rel(SystemC, customerA, "Sends e-mails to")\n\n    UpdateElementStyle(customerA, $fontColor="red", $bgColor="grey", $borderColor="red")\n    UpdateRelStyle(customerA, SystemAA, $textColor="blue", $lineColor="blue", $offsetX="5")\n    UpdateRelStyle(SystemAA, SystemE, $textColor="blue", $lineColor="blue", $offsetY="-10")\n    UpdateRelStyle(SystemAA, SystemC, $textColor="blue", $lineColor="blue", $offsetY="-40", $offsetX="-50")\n    UpdateRelStyle(SystemC, customerA, $textColor="red", $lineColor="red", $offsetX="-50", $offsetY="20")\n\n    UpdateLayoutConfig($c4ShapeInRow="3", $c4BoundaryInRow="1")\n'},timeline:{name:"Timeline",type:"timeline",initialDiagramText:"timeline\n	",sampleDiagramText:"timeline\n    title History of Social Media Platform\n    2002 : LinkedIn\n    2004 : Facebook\n         : Google\n    2005 : Youtube\n    2006 : Twitter\n"},sankey:{name:"Sankey",type:"sankey",initialDiagramText:"sankey-beta\n    Source, Target, 1",sampleDiagramText:"sankey-beta\n    %% source,target,value\n    Electricity grid,Over generation / exports,104.453\n    Electricity grid,Heating and cooling - homes,113.726\n    Electricity grid,H2 conversion,27.14\n    "},architecture:{name:"Architecture",type:"architecture",initialDiagramText:"architecture-beta\n	",sampleDiagramText:"architecture-beta\n    group api(logos:aws-lambda)[API]\n\n    service db(logos:aws-aurora)[Database] in api\n    service disk1(logos:aws-glacier)[Storage] in api\n    service disk2(logos:aws-s3)[Storage] in api\n    service server(logos:aws-ec2)[Server] in api\n\n    db:L -- R:server\n    disk1:T -- B:server\n    disk2:T -- B:db\n"},kanban:{name:"Kanban",type:"kanban",initialDiagramText:"kanban\n	",sampleDiagramText:"kanban\n    [To do]\n        [Create Documentation]\n        docs[Create Blog about the new diagram]\n    [In progress]\n        id6[Create renderer so that it works in all cases. We also add som extra text here for testing purposes. And some more just for the extra flare.]\n    id9[Ready for deploy]\n        id8[Design grammar]@{ assigned: 'ted-marozzi' }\n    id10[Ready for test]\n        id4[Create parsing tests]@{ ticket: MC-2038, assigned: 'Ted Marozzi', priority: 'High' }\n        id66[last item]@{ priority: 'Very Low', assigned: 'ted-marozzi' }\n    id11[Done]\n        id5[define getData]\n        id2[Title of diagram is more than 100 chars when user duplicates diagram with 100 char]@{ ticket: MC-2036, priority: 'Very High'}\n        id3[Update DB function]@{ ticket: MC-2037, assigned: ted-marozzi, priority: 'High' }\n    id12[Can't reproduce]\n        id3[Weird flickering in Firefox]\n"},packet:{name:"Packet",type:"packet",initialDiagramText:"packet-beta\n	",sampleDiagramText:'---\ntitle: "TCP Packet"\n---\npacket-beta\n    0-15: "Source Port"\n    16-31: "Destination Port"\n    32-63: "Sequence Number"\n    64-95: "Acknowledgment Number"\n    96-99: "Data Offset"\n    100-105: "Reserved"\n    106: "URG"\n    107: "ACK"\n    108: "PSH"\n    109: "RST"\n    110: "SYN"\n    111: "FIN"\n    112-127: "Window"\n    128-143: "Checksum"\n    144-159: "Urgent Pointer"\n    160-191: "(Options and Padding)"\n    192-255: "Data (variable length)"\n'},info:{name:"Info",type:"info",initialDiagramText:"info\n",sampleDiagramText:"info\n"}},s=Object.values(r);function i(e){switch(e){case"flowchart":case"flowchart-v2":case"flowchart-elk":return"flowchart";case"block":case"block-beta":return"block";case"class":case"classDiagram":return"class";case"state":case"stateDiagram":return"state";case"quadrantChart":return"quadrant";case"gitGraph":return"git";case"xychart":case"xychart-beta":return"xyChart";case"c4":case"er":case"gantt":case"requirement":case"sequence":case"sankey":case"journey":case"timeline":case"pie":case"mindmap":case"info":case"zenuml":case"architecture":case"kanban":case"packet":return e;default:return null}}let l=n.Ik({firstLine:n.ai(),lastLine:n.ai(),firstColumn:n.ai(),lastColumn:n.ai()})},88200:(e,t,a)=>{function n(e){return e.flatMap((e,t,a)=>t%2?[]:[a.slice(t,t+2)])}function r(e){if(null==document||null==document.startViewTransition)return void e();document.startViewTransition(()=>e())}function s(e){let{parentElement:t,selectors:a}=e;for(let e of a)try{let a=t.querySelector(e);if(null!=a)return a}catch(e){console.warn(e)}return null}function i(e){let t,a,{width:n,height:r,targetWidth:s,targetHeight:i}=e,l=n/r;return l>s/i?(t=s,a=s/l):(a=i,t=i*l),{width:t,height:a}}function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return fetch(...t).then(e=>e.json())}a.d(t,{AS:()=>n,GO:()=>l,Z0:()=>i,dK:()=>r,y:()=>s})},91310:(e,t,a)=>{a.d(t,{d:()=>r});var n=a(12115);function r(e){let{keys:t}=e,[a,r]=(0,n.useState)(!1),s=(0,n.useCallback)(e=>{t.find(t=>{let{key:a,metaKey:n,ctrlKey:r}=t;return e.key===a&&e.metaKey===n&&e.ctrlKey===r})&&r(!0)},[t]),i=(0,n.useCallback)(e=>{r(!1)},[]);return(0,n.useEffect)(()=>(document.addEventListener("keydown",s),document.addEventListener("keyup",i),()=>{document.removeEventListener("keydown",s),document.removeEventListener("keyup",i)}),[i,s]),{pressed:a}}},92464:(e,t,a)=>{a.d(t,{K:()=>r,_:()=>n});let n="split",r="/docs"},96008:(e,t,a)=>{a.d(t,{MermaidImage:()=>p,e:()=>u,j:()=>g});var n=a(95155),r=a(38398),s=a(11514),i=a(81460),l=a(22249),o=a(37485),c=a(12115);let d=null,u=async()=>{if(null!=d)return d;{let e=await Promise.all([a.e(3054),a.e(4776)]).then(a.bind(a,94776)).then(e=>e.icons);return d=e,e}},m=null,g=async()=>{if(null!=m)return m;{let e=await Promise.all([a.e(6301),a.e(8107)]).then(a.bind(a,18107)).then(e=>e.icons);return m=e,e}};o.A.registerIconPacks([{name:"logos",loader:u},{name:"fa",loader:g}]);let h=o.A.registerExternalDiagrams([i.A]);function p(e){let{code:t,imageNodeId:a,onRendered:s,className:i}=e,d=(0,c.useRef)(null),[u,m]=(0,c.useState)(!0),g=(0,l.fI)(e=>e.setError);return(0,c.useEffect)(()=>{(async e=>{if(u)return m(!1);try{await h;let t=await o.A.render(a,e);if(!d.current)return void console.error("Can't render diagram as the mermaid-image-editor node can't be found");d.current.innerHTML=t.svg;let n=d.current.firstElementChild;if(null!=n){n.style.maxHeight="100%",n.style.maxWidth="100%";let e=o.A.mermaidAPI.getConfig().themeVariables.background;null!=e&&(n.style.background=e),s&&s(n,t.diagramType)}}catch(n){n instanceof Error&&"UnknownDiagramError"!==n.name&&"TypeError"!=n.name&&g({message:n.message,location:(0,l.MN)(n)}),l.S9&&console.error("[development]",n);let t=document.getElementById("dmermaid-image-editor"),a=document.getElementById("cy");try{null==t||t.remove(),null==a||a.remove()}catch(e){console.warn(e)}if((null==e?void 0:e.trim())===""){d.current&&(d.current.innerHTML="");return}}})(t)},[t,u,a,s,g]),(0,n.jsx)("div",{ref:d,className:(0,r.cn)("flex h-full w-full items-center justify-center",i),"data-sentry-component":"MermaidImage","data-sentry-source-file":"mermaid_image.tsx"})}o.A.registerLayoutLoaders(s.A)},97434:(e,t,a)=>{a.d(t,{sB:()=>d,jw:()=>u});var n=a(95155),r=a(38757),s=a(79368),i=a(39544),l=a(20556);let o=s.e9.and(l.Ik({start:s.e9,end:s.e9,type:l.Vx()}).or(l.Ik({type:l.eu("style").or(l.Vx())}))),c=l.Ik({id:l.Yj(),title:l.Yj(),styles:l.YO(l.Yj()).default([]),classes:l.YO(l.Yj()).default([]),nodes:l.YO(l.Yj()).default([]),locations:l.YO(o)}),d=l.YO(c),u={key:"subgraph",name:"Subgraph",aliases:[],Icon:(0,n.jsx)(r._,{src:"/_next/static/media/subgraph.094ece53.svg",alt:"Subgraph button",width:i.bj,height:i.gr}),aspectRatio:"2/1",leftChar:"[",rightChar:"]"}}}]);